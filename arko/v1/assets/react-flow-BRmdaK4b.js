import{g as qn}from"./ts-morph-SaAo0aQ4.js";function Na(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var mn={exports:{}},ot={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _r;function Ca(){if(_r)return ot;_r=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,i){var s=null;if(i!==void 0&&(s=""+i),o.key!==void 0&&(s=""+o.key),"key"in o){i={};for(var a in o)a!=="key"&&(i[a]=o[a])}else i=o;return o=i.ref,{$$typeof:e,type:r,key:s,ref:o!==void 0?o:null,props:i}}return ot.Fragment=t,ot.jsx=n,ot.jsxs=n,ot}var Er;function Ma(){return Er||(Er=1,mn.exports=Ca()),mn.exports}var R=Ma(),yn={exports:{}},K={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var br;function Aa(){if(br)return K;br=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),l=Symbol.for("react.activity"),d=Symbol.iterator;function p(y){return y===null||typeof y!="object"?null:(y=d&&y[d]||y["@@iterator"],typeof y=="function"?y:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function m(y,N,V){this.props=y,this.context=N,this.refs=w,this.updater=V||h}m.prototype.isReactComponent={},m.prototype.setState=function(y,N){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,N,"setState")},m.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function E(){}E.prototype=m.prototype;function g(y,N,V){this.props=y,this.context=N,this.refs=w,this.updater=V||h}var v=g.prototype=new E;v.constructor=g,x(v,m.prototype),v.isPureReactComponent=!0;var M=Array.isArray;function S(){}var b={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function z(y,N,V){var O=V.ref;return{$$typeof:e,type:y,key:N,ref:O!==void 0?O:null,props:V}}function j(y,N){return z(y.type,N,y.props)}function k(y){return typeof y=="object"&&y!==null&&y.$$typeof===e}function $(y){var N={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(V){return N[V]})}var B=/\/+/g;function _(y,N){return typeof y=="object"&&y!==null&&y.key!=null?$(""+y.key):N.toString(36)}function T(y){switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:switch(typeof y.status=="string"?y.then(S,S):(y.status="pending",y.then(function(N){y.status==="pending"&&(y.status="fulfilled",y.value=N)},function(N){y.status==="pending"&&(y.status="rejected",y.reason=N)})),y.status){case"fulfilled":return y.value;case"rejected":throw y.reason}}throw y}function C(y,N,V,O,Y){var X=typeof y;(X==="undefined"||X==="boolean")&&(y=null);var q=!1;if(y===null)q=!0;else switch(X){case"bigint":case"string":case"number":q=!0;break;case"object":switch(y.$$typeof){case e:case t:q=!0;break;case f:return q=y._init,C(q(y._payload),N,V,O,Y)}}if(q)return Y=Y(y),q=O===""?"."+_(y,0):O,M(Y)?(V="",q!=null&&(V=q.replace(B,"$&/")+"/"),C(Y,N,V,"",function(ee){return ee})):Y!=null&&(k(Y)&&(Y=j(Y,V+(Y.key==null||y&&y.key===Y.key?"":(""+Y.key).replace(B,"$&/")+"/")+q)),N.push(Y)),1;q=0;var F=O===""?".":O+":";if(M(y))for(var W=0;W<y.length;W++)O=y[W],X=F+_(O,W),q+=C(O,N,V,X,Y);else if(W=p(y),typeof W=="function")for(y=W.call(y),W=0;!(O=y.next()).done;)O=O.value,X=F+_(O,W++),q+=C(O,N,V,X,Y);else if(X==="object"){if(typeof y.then=="function")return C(T(y),N,V,O,Y);throw N=String(y),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.")}return q}function P(y,N,V){if(y==null)return y;var O=[],Y=0;return C(y,O,"","",function(X){return N.call(V,X,Y++)}),O}function I(y){if(y._status===-1){var N=y._result;N=N(),N.then(function(V){(y._status===0||y._status===-1)&&(y._status=1,y._result=V)},function(V){(y._status===0||y._status===-1)&&(y._status=2,y._result=V)}),y._status===-1&&(y._status=0,y._result=N)}if(y._status===1)return y._result.default;throw y._result}var A=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var N=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(N))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)},H={map:P,forEach:function(y,N,V){P(y,function(){N.apply(this,arguments)},V)},count:function(y){var N=0;return P(y,function(){N++}),N},toArray:function(y){return P(y,function(N){return N})||[]},only:function(y){if(!k(y))throw Error("React.Children.only expected to receive a single React element child.");return y}};return K.Activity=l,K.Children=H,K.Component=m,K.Fragment=n,K.Profiler=o,K.PureComponent=g,K.StrictMode=r,K.Suspense=u,K.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=b,K.__COMPILER_RUNTIME={__proto__:null,c:function(y){return b.H.useMemoCache(y)}},K.cache=function(y){return function(){return y.apply(null,arguments)}},K.cacheSignal=function(){return null},K.cloneElement=function(y,N,V){if(y==null)throw Error("The argument must be a React element, but you passed "+y+".");var O=x({},y.props),Y=y.key;if(N!=null)for(X in N.key!==void 0&&(Y=""+N.key),N)!D.call(N,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&N.ref===void 0||(O[X]=N[X]);var X=arguments.length-2;if(X===1)O.children=V;else if(1<X){for(var q=Array(X),F=0;F<X;F++)q[F]=arguments[F+2];O.children=q}return z(y.type,Y,O)},K.createContext=function(y){return y={$$typeof:s,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null},y.Provider=y,y.Consumer={$$typeof:i,_context:y},y},K.createElement=function(y,N,V){var O,Y={},X=null;if(N!=null)for(O in N.key!==void 0&&(X=""+N.key),N)D.call(N,O)&&O!=="key"&&O!=="__self"&&O!=="__source"&&(Y[O]=N[O]);var q=arguments.length-2;if(q===1)Y.children=V;else if(1<q){for(var F=Array(q),W=0;W<q;W++)F[W]=arguments[W+2];Y.children=F}if(y&&y.defaultProps)for(O in q=y.defaultProps,q)Y[O]===void 0&&(Y[O]=q[O]);return z(y,X,Y)},K.createRef=function(){return{current:null}},K.forwardRef=function(y){return{$$typeof:a,render:y}},K.isValidElement=k,K.lazy=function(y){return{$$typeof:f,_payload:{_status:-1,_result:y},_init:I}},K.memo=function(y,N){return{$$typeof:c,type:y,compare:N===void 0?null:N}},K.startTransition=function(y){var N=b.T,V={};b.T=V;try{var O=y(),Y=b.S;Y!==null&&Y(V,O),typeof O=="object"&&O!==null&&typeof O.then=="function"&&O.then(S,A)}catch(X){A(X)}finally{N!==null&&V.types!==null&&(N.types=V.types),b.T=N}},K.unstable_useCacheRefresh=function(){return b.H.useCacheRefresh()},K.use=function(y){return b.H.use(y)},K.useActionState=function(y,N,V){return b.H.useActionState(y,N,V)},K.useCallback=function(y,N){return b.H.useCallback(y,N)},K.useContext=function(y){return b.H.useContext(y)},K.useDebugValue=function(){},K.useDeferredValue=function(y,N){return b.H.useDeferredValue(y,N)},K.useEffect=function(y,N){return b.H.useEffect(y,N)},K.useEffectEvent=function(y){return b.H.useEffectEvent(y)},K.useId=function(){return b.H.useId()},K.useImperativeHandle=function(y,N,V){return b.H.useImperativeHandle(y,N,V)},K.useInsertionEffect=function(y,N){return b.H.useInsertionEffect(y,N)},K.useLayoutEffect=function(y,N){return b.H.useLayoutEffect(y,N)},K.useMemo=function(y,N){return b.H.useMemo(y,N)},K.useOptimistic=function(y,N){return b.H.useOptimistic(y,N)},K.useReducer=function(y,N,V){return b.H.useReducer(y,N,V)},K.useRef=function(y){return b.H.useRef(y)},K.useState=function(y){return b.H.useState(y)},K.useSyncExternalStore=function(y,N,V){return b.H.useSyncExternalStore(y,N,V)},K.useTransition=function(){return b.H.useTransition()},K.version="19.2.3",K}var Sr;function Jt(){return Sr||(Sr=1,yn.exports=Aa()),yn.exports}var L=Jt();const zo=qn(L),Xg=Na({__proto__:null,default:zo},[L]);var xn={exports:{}},ce={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nr;function Ia(){if(Nr)return ce;Nr=1;var e=Jt();function t(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function i(u,c,f){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:l==null?null:""+l,children:u,containerInfo:c,implementation:f}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return ce.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ce.createPortal=function(u,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(u,c,null,f)},ce.flushSync=function(u){var c=s.T,f=r.p;try{if(s.T=null,r.p=2,u)return u()}finally{s.T=c,r.p=f,r.d.f()}},ce.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},ce.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},ce.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var f=c.as,l=a(f,c.crossOrigin),d=typeof c.integrity=="string"?c.integrity:void 0,p=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:l,integrity:d,fetchPriority:p}):f==="script"&&r.d.X(u,{crossOrigin:l,integrity:d,fetchPriority:p,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},ce.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=a(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},ce.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,l=a(f,c.crossOrigin);r.d.L(u,f,{crossOrigin:l,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},ce.preloadModule=function(u,c){if(typeof u=="string")if(c){var f=a(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},ce.requestFormReset=function(u){r.d.r(u)},ce.unstable_batchedUpdates=function(u,c){return u(c)},ce.useFormState=function(u,c,f){return s.H.useFormState(u,c,f)},ce.useFormStatus=function(){return s.H.useHostTransitionStatus()},ce.version="19.2.3",ce}var Cr;function ka(){if(Cr)return xn.exports;Cr=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),xn.exports=Ia(),xn.exports}var Wn=ka();const qg=qn(Wn);function se(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=se(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Ta={value:()=>{}};function en(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Dt(n)}function Dt(e){this._=e}function $a(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Dt.prototype=en.prototype={constructor:Dt,on:function(e,t){var n=this._,r=$a(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=Pa(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=Mr(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Mr(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Dt(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function Pa(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Mr(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Ta,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var $n="http://www.w3.org/1999/xhtml";const Ar={svg:"http://www.w3.org/2000/svg",xhtml:$n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ar.hasOwnProperty(t)?{space:Ar[t],local:e}:e}function Ra(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===$n&&t.documentElement.namespaceURI===$n?t.createElement(e):t.createElementNS(n,e)}}function za(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Do(e){var t=tn(e);return(t.local?za:Ra)(t)}function Da(){}function Gn(e){return e==null?Da:function(){return this.querySelector(e)}}function La(e){typeof e!="function"&&(e=Gn(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=new Array(s),u,c,f=0;f<s;++f)(u=i[f])&&(c=e.call(u,u.__data__,f,i))&&("__data__"in u&&(c.__data__=u.__data__),a[f]=c);return new fe(r,this._parents)}function Ha(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Oa(){return[]}function Lo(e){return e==null?Oa:function(){return this.querySelectorAll(e)}}function Va(e){return function(){return Ha(e.apply(this,arguments))}}function Ba(e){typeof e=="function"?e=Va(e):e=Lo(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],a=s.length,u,c=0;c<a;++c)(u=s[c])&&(r.push(e.call(u,u.__data__,c,s)),o.push(u));return new fe(r,o)}function Ho(e){return function(){return this.matches(e)}}function Oo(e){return function(t){return t.matches(e)}}var ja=Array.prototype.find;function Fa(e){return function(){return ja.call(this.children,e)}}function Ya(){return this.firstElementChild}function Xa(e){return this.select(e==null?Ya:Fa(typeof e=="function"?e:Oo(e)))}var qa=Array.prototype.filter;function Wa(){return Array.from(this.children)}function Ga(e){return function(){return qa.call(this.children,e)}}function Ua(e){return this.selectAll(e==null?Wa:Ga(typeof e=="function"?e:Oo(e)))}function Za(e){typeof e!="function"&&(e=Ho(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],u,c=0;c<s;++c)(u=i[c])&&e.call(u,u.__data__,c,i)&&a.push(u);return new fe(r,this._parents)}function Vo(e){return new Array(e.length)}function Ka(){return new fe(this._enter||this._groups.map(Vo),this._parents)}function Bt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Bt.prototype={constructor:Bt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Qa(e){return function(){return e}}function Ja(e,t,n,r,o,i){for(var s=0,a,u=t.length,c=i.length;s<c;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new Bt(e,i[s]);for(;s<u;++s)(a=t[s])&&(o[s]=a)}function ec(e,t,n,r,o,i,s){var a,u,c=new Map,f=t.length,l=i.length,d=new Array(f),p;for(a=0;a<f;++a)(u=t[a])&&(d[a]=p=s.call(u,u.__data__,a,t)+"",c.has(p)?o[a]=u:c.set(p,u));for(a=0;a<l;++a)p=s.call(e,i[a],a,i)+"",(u=c.get(p))?(r[a]=u,u.__data__=i[a],c.delete(p)):n[a]=new Bt(e,i[a]);for(a=0;a<f;++a)(u=t[a])&&c.get(d[a])===u&&(o[a]=u)}function tc(e){return e.__data__}function nc(e,t){if(!arguments.length)return Array.from(this,tc);var n=t?ec:Ja,r=this._parents,o=this._groups;typeof e!="function"&&(e=Qa(e));for(var i=o.length,s=new Array(i),a=new Array(i),u=new Array(i),c=0;c<i;++c){var f=r[c],l=o[c],d=l.length,p=rc(e.call(f,f&&f.__data__,c,r)),h=p.length,x=a[c]=new Array(h),w=s[c]=new Array(h),m=u[c]=new Array(d);n(f,l,x,w,m,p,t);for(var E=0,g=0,v,M;E<h;++E)if(v=x[E]){for(E>=g&&(g=E+1);!(M=w[g])&&++g<h;);v._next=M||null}}return s=new fe(s,r),s._enter=a,s._exit=u,s}function rc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oc(){return new fe(this._exit||this._groups.map(Vo),this._parents)}function ic(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function sc(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),u=0;u<s;++u)for(var c=n[u],f=r[u],l=c.length,d=a[u]=new Array(l),p,h=0;h<l;++h)(p=c[h]||f[h])&&(d[h]=p);for(;u<o;++u)a[u]=n[u];return new fe(a,this._parents)}function ac(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function cc(e){e||(e=uc);function t(l,d){return l&&d?e(l.__data__,d.__data__):!l-!d}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],a=s.length,u=o[i]=new Array(a),c,f=0;f<a;++f)(c=s[f])&&(u[f]=c);u.sort(t)}return new fe(o,this._parents).order()}function uc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function lc(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function fc(){return Array.from(this)}function dc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function hc(){let e=0;for(const t of this)++e;return e}function gc(){return!this.node()}function pc(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,a;i<s;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this}function mc(e){return function(){this.removeAttribute(e)}}function yc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xc(e,t){return function(){this.setAttribute(e,t)}}function wc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function vc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function _c(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ec(e,t){var n=tn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?yc:mc:typeof t=="function"?n.local?_c:vc:n.local?wc:xc)(n,t))}function Bo(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bc(e){return function(){this.style.removeProperty(e)}}function Sc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Nc(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Cc(e,t,n){return arguments.length>1?this.each((t==null?bc:typeof t=="function"?Nc:Sc)(e,t,n??"")):We(this.node(),e)}function We(e,t){return e.style.getPropertyValue(t)||Bo(e).getComputedStyle(e,null).getPropertyValue(t)}function Mc(e){return function(){delete this[e]}}function Ac(e,t){return function(){this[e]=t}}function Ic(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function kc(e,t){return arguments.length>1?this.each((t==null?Mc:typeof t=="function"?Ic:Ac)(e,t)):this.node()[e]}function jo(e){return e.trim().split(/^|\s+/)}function Un(e){return e.classList||new Fo(e)}function Fo(e){this._node=e,this._names=jo(e.getAttribute("class")||"")}Fo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Yo(e,t){for(var n=Un(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Xo(e,t){for(var n=Un(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Tc(e){return function(){Yo(this,e)}}function $c(e){return function(){Xo(this,e)}}function Pc(e,t){return function(){(t.apply(this,arguments)?Yo:Xo)(this,e)}}function Rc(e,t){var n=jo(e+"");if(arguments.length<2){for(var r=Un(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Pc:t?Tc:$c)(n,t))}function zc(){this.textContent=""}function Dc(e){return function(){this.textContent=e}}function Lc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Hc(e){return arguments.length?this.each(e==null?zc:(typeof e=="function"?Lc:Dc)(e)):this.node().textContent}function Oc(){this.innerHTML=""}function Vc(e){return function(){this.innerHTML=e}}function Bc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function jc(e){return arguments.length?this.each(e==null?Oc:(typeof e=="function"?Bc:Vc)(e)):this.node().innerHTML}function Fc(){this.nextSibling&&this.parentNode.appendChild(this)}function Yc(){return this.each(Fc)}function Xc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qc(){return this.each(Xc)}function Wc(e){var t=typeof e=="function"?e:Do(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Gc(){return null}function Uc(e,t){var n=typeof e=="function"?e:Do(e),r=t==null?Gc:typeof t=="function"?t:Gn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Zc(){var e=this.parentNode;e&&e.removeChild(this)}function Kc(){return this.each(Zc)}function Qc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eu(e){return this.select(e?Jc:Qc)}function tu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function nu(e){return function(t){e.call(this,t,this.__data__)}}function ru(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ou(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function iu(e,t,n){return function(){var r=this.__on,o,i=nu(t);if(r){for(var s=0,a=r.length;s<a;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function su(e,t,n){var r=ru(e+""),o,i=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,c=a.length,f;u<c;++u)for(o=0,f=a[u];o<i;++o)if((s=r[o]).type===f.type&&s.name===f.name)return f.value}return}for(a=t?iu:ou,o=0;o<i;++o)this.each(a(r[o],t,n));return this}function qo(e,t,n){var r=Bo(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function au(e,t){return function(){return qo(this,e,t)}}function cu(e,t){return function(){return qo(this,e,t.apply(this,arguments))}}function uu(e,t){return this.each((typeof t=="function"?cu:au)(e,t))}function*lu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var Wo=[null];function fe(e,t){this._groups=e,this._parents=t}function vt(){return new fe([[document.documentElement]],Wo)}function fu(){return this}fe.prototype=vt.prototype={constructor:fe,select:La,selectAll:Ba,selectChild:Xa,selectChildren:Ua,filter:Za,data:nc,enter:Ka,exit:oc,join:ic,merge:sc,selection:fu,order:ac,sort:cc,call:lc,nodes:fc,node:dc,size:hc,empty:gc,each:pc,attr:Ec,style:Cc,property:kc,classed:Rc,text:Hc,html:jc,raise:Yc,lower:qc,append:Wc,insert:Uc,remove:Kc,clone:eu,datum:tu,on:su,dispatch:uu,[Symbol.iterator]:lu};function le(e){return typeof e=="string"?new fe([[document.querySelector(e)]],[document.documentElement]):new fe([[e]],Wo)}function du(e){let t;for(;t=e.sourceEvent;)e=t;return e}function de(e,t){if(e=du(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const hu={passive:!1},ft={capture:!0,passive:!1};function wn(e){e.stopImmediatePropagation()}function Xe(e){e.preventDefault(),e.stopImmediatePropagation()}function Go(e){var t=e.document.documentElement,n=le(e).on("dragstart.drag",Xe,ft);"onselectstart"in t?n.on("selectstart.drag",Xe,ft):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Uo(e,t){var n=e.document.documentElement,r=le(e).on("dragstart.drag",null);t&&(r.on("click.drag",Xe,ft),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Mt=e=>()=>e;function Pn(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:a,dx:u,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}Pn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function gu(e){return!e.ctrlKey&&!e.button}function pu(){return this.parentNode}function mu(e,t){return t??{x:e.x,y:e.y}}function yu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zo(){var e=gu,t=pu,n=mu,r=yu,o={},i=en("start","drag","end"),s=0,a,u,c,f,l=0;function d(v){v.on("mousedown.drag",p).filter(r).on("touchstart.drag",w).on("touchmove.drag",m,hu).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(v,M){if(!(f||!e.call(this,v,M))){var S=g(this,t.call(this,v,M),v,M,"mouse");S&&(le(v.view).on("mousemove.drag",h,ft).on("mouseup.drag",x,ft),Go(v.view),wn(v),c=!1,a=v.clientX,u=v.clientY,S("start",v))}}function h(v){if(Xe(v),!c){var M=v.clientX-a,S=v.clientY-u;c=M*M+S*S>l}o.mouse("drag",v)}function x(v){le(v.view).on("mousemove.drag mouseup.drag",null),Uo(v.view,c),Xe(v),o.mouse("end",v)}function w(v,M){if(e.call(this,v,M)){var S=v.changedTouches,b=t.call(this,v,M),D=S.length,z,j;for(z=0;z<D;++z)(j=g(this,b,v,M,S[z].identifier,S[z]))&&(wn(v),j("start",v,S[z]))}}function m(v){var M=v.changedTouches,S=M.length,b,D;for(b=0;b<S;++b)(D=o[M[b].identifier])&&(Xe(v),D("drag",v,M[b]))}function E(v){var M=v.changedTouches,S=M.length,b,D;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),b=0;b<S;++b)(D=o[M[b].identifier])&&(wn(v),D("end",v,M[b]))}function g(v,M,S,b,D,z){var j=i.copy(),k=de(z||S,M),$,B,_;if((_=n.call(v,new Pn("beforestart",{sourceEvent:S,target:d,identifier:D,active:s,x:k[0],y:k[1],dx:0,dy:0,dispatch:j}),b))!=null)return $=_.x-k[0]||0,B=_.y-k[1]||0,function T(C,P,I){var A=k,H;switch(C){case"start":o[D]=T,H=s++;break;case"end":delete o[D],--s;case"drag":k=de(I||P,M),H=s;break}j.call(C,v,new Pn(C,{sourceEvent:P,subject:_,target:d,identifier:D,active:H,x:k[0]+$,y:k[1]+B,dx:k[0]-A[0],dy:k[1]-A[1],dispatch:j}),b)}}return d.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Mt(!!v),d):e},d.container=function(v){return arguments.length?(t=typeof v=="function"?v:Mt(v),d):t},d.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Mt(v),d):n},d.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Mt(!!v),d):r},d.on=function(){var v=i.on.apply(i,arguments);return v===i?d:v},d.clickDistance=function(v){return arguments.length?(l=(v=+v)*v,d):Math.sqrt(l)},d}function Zn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ko(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _t(){}var dt=.7,jt=1/dt,qe="\\s*([+-]?\\d+)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xu=/^#([0-9a-f]{3,8})$/,wu=new RegExp(`^rgb\\(${qe},${qe},${qe}\\)$`),vu=new RegExp(`^rgb\\(${xe},${xe},${xe}\\)$`),_u=new RegExp(`^rgba\\(${qe},${qe},${qe},${ht}\\)$`),Eu=new RegExp(`^rgba\\(${xe},${xe},${xe},${ht}\\)$`),bu=new RegExp(`^hsl\\(${ht},${xe},${xe}\\)$`),Su=new RegExp(`^hsla\\(${ht},${xe},${xe},${ht}\\)$`),Ir={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zn(_t,De,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kr,formatHex:kr,formatHex8:Nu,formatHsl:Cu,formatRgb:Tr,toString:Tr});function kr(){return this.rgb().formatHex()}function Nu(){return this.rgb().formatHex8()}function Cu(){return Qo(this).formatHsl()}function Tr(){return this.rgb().formatRgb()}function De(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$r(t):n===3?new ue(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?At(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?At(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wu.exec(e))?new ue(t[1],t[2],t[3],1):(t=vu.exec(e))?new ue(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_u.exec(e))?At(t[1],t[2],t[3],t[4]):(t=Eu.exec(e))?At(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bu.exec(e))?zr(t[1],t[2]/100,t[3]/100,1):(t=Su.exec(e))?zr(t[1],t[2]/100,t[3]/100,t[4]):Ir.hasOwnProperty(e)?$r(Ir[e]):e==="transparent"?new ue(NaN,NaN,NaN,0):null}function $r(e){return new ue(e>>16&255,e>>8&255,e&255,1)}function At(e,t,n,r){return r<=0&&(e=t=n=NaN),new ue(e,t,n,r)}function Mu(e){return e instanceof _t||(e=De(e)),e?(e=e.rgb(),new ue(e.r,e.g,e.b,e.opacity)):new ue}function Rn(e,t,n,r){return arguments.length===1?Mu(e):new ue(e,t,n,r??1)}function ue(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Zn(ue,Rn,Ko(_t,{brighter(e){return e=e==null?jt:Math.pow(jt,e),new ue(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dt:Math.pow(dt,e),new ue(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ue(Re(this.r),Re(this.g),Re(this.b),Ft(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pr,formatHex:Pr,formatHex8:Au,formatRgb:Rr,toString:Rr}));function Pr(){return`#${Pe(this.r)}${Pe(this.g)}${Pe(this.b)}`}function Au(){return`#${Pe(this.r)}${Pe(this.g)}${Pe(this.b)}${Pe((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rr(){const e=Ft(this.opacity);return`${e===1?"rgb(":"rgba("}${Re(this.r)}, ${Re(this.g)}, ${Re(this.b)}${e===1?")":`, ${e})`}`}function Ft(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Re(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pe(e){return e=Re(e),(e<16?"0":"")+e.toString(16)}function zr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new he(e,t,n,r)}function Qo(e){if(e instanceof he)return new he(e.h,e.s,e.l,e.opacity);if(e instanceof _t||(e=De(e)),!e)return new he;if(e instanceof he)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,u=(i+o)/2;return a?(t===i?s=(n-r)/a+(n<r)*6:n===i?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?i+o:2-i-o,s*=60):a=u>0&&u<1?0:s,new he(s,a,u,e.opacity)}function Iu(e,t,n,r){return arguments.length===1?Qo(e):new he(e,t,n,r??1)}function he(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Zn(he,Iu,Ko(_t,{brighter(e){return e=e==null?jt:Math.pow(jt,e),new he(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dt:Math.pow(dt,e),new he(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new ue(vn(e>=240?e-240:e+120,o,r),vn(e,o,r),vn(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new he(Dr(this.h),It(this.s),It(this.l),Ft(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ft(this.opacity);return`${e===1?"hsl(":"hsla("}${Dr(this.h)}, ${It(this.s)*100}%, ${It(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Dr(e){return e=(e||0)%360,e<0?e+360:e}function It(e){return Math.max(0,Math.min(1,e||0))}function vn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Kn=e=>()=>e;function ku(e,t){return function(n){return e+n*t}}function Tu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function $u(e){return(e=+e)==1?Jo:function(t,n){return n-t?Tu(t,n,e):Kn(isNaN(t)?n:t)}}function Jo(e,t){var n=t-e;return n?ku(e,n):Kn(isNaN(e)?t:e)}const Yt=(function e(t){var n=$u(t);function r(o,i){var s=n((o=Rn(o)).r,(i=Rn(i)).r),a=n(o.g,i.g),u=n(o.b,i.b),c=Jo(o.opacity,i.opacity);return function(f){return o.r=s(f),o.g=a(f),o.b=u(f),o.opacity=c(f),o+""}}return r.gamma=e,r})(1);function Pu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(i){for(o=0;o<n;++o)r[o]=e[o]*(1-i)+t[o]*i;return r}}function Ru(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function zu(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),i=new Array(n),s;for(s=0;s<r;++s)o[s]=ut(e[s],t[s]);for(;s<n;++s)i[s]=t[s];return function(a){for(s=0;s<r;++s)i[s]=o[s](a);return i}}function Du(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ye(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Lu(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=ut(e[o],t[o]):r[o]=t[o];return function(i){for(o in n)r[o]=n[o](i);return r}}var zn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_n=new RegExp(zn.source,"g");function Hu(e){return function(){return e}}function Ou(e){return function(t){return e(t)+""}}function ei(e,t){var n=zn.lastIndex=_n.lastIndex=0,r,o,i,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=zn.exec(e))&&(o=_n.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(r=r[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,u.push({i:s,x:ye(r,o)})),n=_n.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?u[0]?Ou(u[0].x):Hu(t):(t=u.length,function(c){for(var f=0,l;f<t;++f)a[(l=u[f]).i]=l.x(c);return a.join("")})}function ut(e,t){var n=typeof t,r;return t==null||n==="boolean"?Kn(t):(n==="number"?ye:n==="string"?(r=De(t))?(t=r,Yt):ei:t instanceof De?Yt:t instanceof Date?Du:Ru(t)?Pu:Array.isArray(t)?zu:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Lu:ye)(e,t)}var Lr=180/Math.PI,Dn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ti(e,t,n,r,o,i){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Lr,skewX:Math.atan(u)*Lr,scaleX:s,scaleY:a}}var kt;function Vu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Dn:ti(t.a,t.b,t.c,t.d,t.e,t.f)}function Bu(e){return e==null||(kt||(kt=document.createElementNS("http://www.w3.org/2000/svg","g")),kt.setAttribute("transform",e),!(e=kt.transform.baseVal.consolidate()))?Dn:(e=e.matrix,ti(e.a,e.b,e.c,e.d,e.e,e.f))}function ni(e,t,n,r){function o(c){return c.length?c.pop()+" ":""}function i(c,f,l,d,p,h){if(c!==l||f!==d){var x=p.push("translate(",null,t,null,n);h.push({i:x-4,x:ye(c,l)},{i:x-2,x:ye(f,d)})}else(l||d)&&p.push("translate("+l+t+d+n)}function s(c,f,l,d){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),d.push({i:l.push(o(l)+"rotate(",null,r)-2,x:ye(c,f)})):f&&l.push(o(l)+"rotate("+f+r)}function a(c,f,l,d){c!==f?d.push({i:l.push(o(l)+"skewX(",null,r)-2,x:ye(c,f)}):f&&l.push(o(l)+"skewX("+f+r)}function u(c,f,l,d,p,h){if(c!==l||f!==d){var x=p.push(o(p)+"scale(",null,",",null,")");h.push({i:x-4,x:ye(c,l)},{i:x-2,x:ye(f,d)})}else(l!==1||d!==1)&&p.push(o(p)+"scale("+l+","+d+")")}return function(c,f){var l=[],d=[];return c=e(c),f=e(f),i(c.translateX,c.translateY,f.translateX,f.translateY,l,d),s(c.rotate,f.rotate,l,d),a(c.skewX,f.skewX,l,d),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,l,d),c=f=null,function(p){for(var h=-1,x=d.length,w;++h<x;)l[(w=d[h]).i]=w.x(p);return l.join("")}}}var ju=ni(Vu,"px, ","px)","deg)"),Fu=ni(Bu,", ",")",")"),Yu=1e-12;function Hr(e){return((e=Math.exp(e))+1/e)/2}function Xu(e){return((e=Math.exp(e))-1/e)/2}function qu(e){return((e=Math.exp(2*e))-1)/(e+1)}const Lt=(function e(t,n,r){function o(i,s){var a=i[0],u=i[1],c=i[2],f=s[0],l=s[1],d=s[2],p=f-a,h=l-u,x=p*p+h*h,w,m;if(x<Yu)m=Math.log(d/c)/t,w=function(b){return[a+b*p,u+b*h,c*Math.exp(t*b*m)]};else{var E=Math.sqrt(x),g=(d*d-c*c+r*x)/(2*c*n*E),v=(d*d-c*c-r*x)/(2*d*n*E),M=Math.log(Math.sqrt(g*g+1)-g),S=Math.log(Math.sqrt(v*v+1)-v);m=(S-M)/t,w=function(b){var D=b*m,z=Hr(M),j=c/(n*E)*(z*qu(t*D+M)-Xu(M));return[a+j*p,u+j*h,c*z/Hr(t*D+M)]}}return w.duration=m*1e3*t/Math.SQRT2,w}return o.rho=function(i){var s=Math.max(.001,+i),a=s*s,u=a*a;return e(s,a,u)},o})(Math.SQRT2,2,4);var Ge=0,at=0,it=0,ri=1e3,Xt,ct,qt=0,Le=0,nn=0,gt=typeof performance=="object"&&performance.now?performance:Date,oi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qn(){return Le||(oi(Wu),Le=gt.now()+nn)}function Wu(){Le=0}function Wt(){this._call=this._time=this._next=null}Wt.prototype=ii.prototype={constructor:Wt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Qn():+n)+(t==null?0:+t),!this._next&&ct!==this&&(ct?ct._next=this:Xt=this,ct=this),this._call=e,this._time=n,Ln()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ln())}};function ii(e,t,n){var r=new Wt;return r.restart(e,t,n),r}function Gu(){Qn(),++Ge;for(var e=Xt,t;e;)(t=Le-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ge}function Or(){Le=(qt=gt.now())+nn,Ge=at=0;try{Gu()}finally{Ge=0,Zu(),Le=0}}function Uu(){var e=gt.now(),t=e-qt;t>ri&&(nn-=t,qt=e)}function Zu(){for(var e,t=Xt,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Xt=n);ct=e,Ln(r)}function Ln(e){if(!Ge){at&&(at=clearTimeout(at));var t=e-Le;t>24?(e<1/0&&(at=setTimeout(Or,e-gt.now()-nn)),it&&(it=clearInterval(it))):(it||(qt=gt.now(),it=setInterval(Uu,ri)),Ge=1,oi(Or))}}function Vr(e,t,n){var r=new Wt;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Ku=en("start","end","cancel","interrupt"),Qu=[],si=0,Br=1,Hn=2,Ht=3,jr=4,On=5,Ot=6;function rn(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Ju(e,n,{name:t,index:r,group:o,on:Ku,tween:Qu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:si})}function Jn(e,t){var n=me(e,t);if(n.state>si)throw new Error("too late; already scheduled");return n}function ve(e,t){var n=me(e,t);if(n.state>Ht)throw new Error("too late; already running");return n}function me(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ju(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=ii(i,0,n.time);function i(c){n.state=Br,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var f,l,d,p;if(n.state!==Br)return u();for(f in r)if(p=r[f],p.name===n.name){if(p.state===Ht)return Vr(s);p.state===jr?(p.state=Ot,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[f]):+f<t&&(p.state=Ot,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[f])}if(Vr(function(){n.state===Ht&&(n.state=jr,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Hn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Hn){for(n.state=Ht,o=new Array(d=n.tween.length),f=0,l=-1;f<d;++f)(p=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(o[++l]=p);o.length=l+1}}function a(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=On,1),l=-1,d=o.length;++l<d;)o[l].call(e,f);n.state===On&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Ot,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Vt(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>Hn&&r.state<On,r.state=Ot,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function el(e){return this.each(function(){Vt(this,e)})}function tl(e,t){var n,r;return function(){var o=ve(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function nl(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=ve(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},u=0,c=o.length;u<c;++u)if(o[u].name===t){o[u]=a;break}u===c&&o.push(a)}i.tween=o}}function rl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=me(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?tl:nl)(n,e,t))}function er(e,t,n){var r=e._id;return e.each(function(){var o=ve(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return me(o,r).value[t]}}function ai(e,t){var n;return(typeof t=="number"?ye:t instanceof De?Yt:(n=De(t))?(t=n,Yt):ei)(e,t)}function ol(e){return function(){this.removeAttribute(e)}}function il(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sl(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function al(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function cl(e,t,n){var r,o,i;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,a)))}}function ul(e,t,n){var r,o,i;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,a)))}}function ll(e,t){var n=tn(e),r=n==="transform"?Fu:ai;return this.attrTween(e,typeof t=="function"?(n.local?ul:cl)(n,r,er(this,"attr."+e,t)):t==null?(n.local?il:ol)(n):(n.local?al:sl)(n,r,t))}function fl(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dl(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hl(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&dl(e,i)),n}return o._value=t,o}function gl(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&fl(e,i)),n}return o._value=t,o}function pl(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=tn(e);return this.tween(n,(r.local?hl:gl)(r,t))}function ml(e,t){return function(){Jn(this,e).delay=+t.apply(this,arguments)}}function yl(e,t){return t=+t,function(){Jn(this,e).delay=t}}function xl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ml:yl)(t,e)):me(this.node(),t).delay}function wl(e,t){return function(){ve(this,e).duration=+t.apply(this,arguments)}}function vl(e,t){return t=+t,function(){ve(this,e).duration=t}}function _l(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wl:vl)(t,e)):me(this.node(),t).duration}function El(e,t){if(typeof t!="function")throw new Error;return function(){ve(this,e).ease=t}}function bl(e){var t=this._id;return arguments.length?this.each(El(t,e)):me(this.node(),t).ease}function Sl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ve(this,e).ease=n}}function Nl(e){if(typeof e!="function")throw new Error;return this.each(Sl(this._id,e))}function Cl(e){typeof e!="function"&&(e=Ho(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],u,c=0;c<s;++c)(u=i[c])&&e.call(u,u.__data__,c,i)&&a.push(u);return new Se(r,this._parents,this._name,this._id)}function Ml(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var u=t[a],c=n[a],f=u.length,l=s[a]=new Array(f),d,p=0;p<f;++p)(d=u[p]||c[p])&&(l[p]=d);for(;a<r;++a)s[a]=t[a];return new Se(s,this._parents,this._name,this._id)}function Al(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Il(e,t,n){var r,o,i=Al(t)?Jn:ve;return function(){var s=i(this,e),a=s.on;a!==r&&(o=(r=a).copy()).on(t,n),s.on=o}}function kl(e,t){var n=this._id;return arguments.length<2?me(this.node(),n).on.on(e):this.each(Il(n,e,t))}function Tl(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $l(){return this.on("end.remove",Tl(this._id))}function Pl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gn(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a=r[s],u=a.length,c=i[s]=new Array(u),f,l,d=0;d<u;++d)(f=a[d])&&(l=e.call(f,f.__data__,d,a))&&("__data__"in f&&(l.__data__=f.__data__),c[d]=l,rn(c[d],t,n,d,c,me(f,n)));return new Se(i,this._parents,t,n)}function Rl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lo(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var u=r[a],c=u.length,f,l=0;l<c;++l)if(f=u[l]){for(var d=e.call(f,f.__data__,l,u),p,h=me(f,n),x=0,w=d.length;x<w;++x)(p=d[x])&&rn(p,t,n,x,d,h);i.push(d),s.push(f)}return new Se(i,s,t,n)}var zl=vt.prototype.constructor;function Dl(){return new zl(this._groups,this._parents)}function Ll(e,t){var n,r,o;return function(){var i=We(this,e),s=(this.style.removeProperty(e),We(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function ci(e){return function(){this.style.removeProperty(e)}}function Hl(e,t,n){var r,o=n+"",i;return function(){var s=We(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function Ol(e,t,n){var r,o,i;return function(){var s=We(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),We(this,e))),s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,a))}}function Vl(e,t){var n,r,o,i="style."+t,s="end."+i,a;return function(){var u=ve(this,e),c=u.on,f=u.value[i]==null?a||(a=ci(t)):void 0;(c!==n||o!==f)&&(r=(n=c).copy()).on(s,o=f),u.on=r}}function Bl(e,t,n){var r=(e+="")=="transform"?ju:ai;return t==null?this.styleTween(e,Ll(e,r)).on("end.style."+e,ci(e)):typeof t=="function"?this.styleTween(e,Ol(e,r,er(this,"style."+e,t))).each(Vl(this._id,e)):this.styleTween(e,Hl(e,r,t),n).on("end.style."+e,null)}function jl(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Fl(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&jl(e,s,n)),r}return i._value=t,i}function Yl(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Fl(e,t,n??""))}function Xl(e){return function(){this.textContent=e}}function ql(e){return function(){var t=e(this);this.textContent=t??""}}function Wl(e){return this.tween("text",typeof e=="function"?ql(er(this,"text",e)):Xl(e==null?"":e+""))}function Gl(e){return function(t){this.textContent=e.call(this,t)}}function Ul(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Gl(o)),t}return r._value=e,r}function Zl(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ul(e))}function Kl(){for(var e=this._name,t=this._id,n=ui(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,u,c=0;c<a;++c)if(u=s[c]){var f=me(u,t);rn(u,e,n,c,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Se(r,this._parents,e,n)}function Ql(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var a={value:s},u={value:function(){--o===0&&i()}};n.each(function(){var c=ve(this,r),f=c.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),c.on=t}),o===0&&i()})}var Jl=0;function Se(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ui(){return++Jl}var Ee=vt.prototype;Se.prototype={constructor:Se,select:Pl,selectAll:Rl,selectChild:Ee.selectChild,selectChildren:Ee.selectChildren,filter:Cl,merge:Ml,selection:Dl,transition:Kl,call:Ee.call,nodes:Ee.nodes,node:Ee.node,size:Ee.size,empty:Ee.empty,each:Ee.each,on:kl,attr:ll,attrTween:pl,style:Bl,styleTween:Yl,text:Wl,textTween:Zl,remove:$l,tween:rl,delay:xl,duration:_l,ease:bl,easeVarying:Nl,end:Ql,[Symbol.iterator]:Ee[Symbol.iterator]};function ef(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var tf={time:null,delay:0,duration:250,ease:ef};function nf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rf(e){var t,n;e instanceof Se?(t=e._id,e=e._name):(t=ui(),(n=tf).time=Qn(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,u,c=0;c<a;++c)(u=s[c])&&rn(u,e,t,c,s,n||nf(u,t));return new Se(r,this._parents,e,t)}vt.prototype.interrupt=el;vt.prototype.transition=rf;const Tt=e=>()=>e;function of(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function be(e,t,n){this.k=e,this.x=t,this.y=n}be.prototype={constructor:be,scale:function(e){return e===1?this:new be(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new be(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var on=new be(1,0,0);li.prototype=be.prototype;function li(e){for(;!e.__zoom;)if(!(e=e.parentNode))return on;return e.__zoom}function En(e){e.stopImmediatePropagation()}function st(e){e.preventDefault(),e.stopImmediatePropagation()}function sf(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function af(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Fr(){return this.__zoom||on}function cf(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function uf(){return navigator.maxTouchPoints||"ontouchstart"in this}function lf(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function fi(){var e=sf,t=af,n=lf,r=cf,o=uf,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Lt,c=en("start","zoom","end"),f,l,d,p=500,h=150,x=0,w=10;function m(_){_.property("__zoom",Fr).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",z).on("dblclick.zoom",j).filter(o).on("touchstart.zoom",k).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(_,T,C,P){var I=_.selection?_.selection():_;I.property("__zoom",Fr),_!==I?M(_,T,C,P):I.interrupt().each(function(){S(this,arguments).event(P).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},m.scaleBy=function(_,T,C,P){m.scaleTo(_,function(){var I=this.__zoom.k,A=typeof T=="function"?T.apply(this,arguments):T;return I*A},C,P)},m.scaleTo=function(_,T,C,P){m.transform(_,function(){var I=t.apply(this,arguments),A=this.__zoom,H=C==null?v(I):typeof C=="function"?C.apply(this,arguments):C,y=A.invert(H),N=typeof T=="function"?T.apply(this,arguments):T;return n(g(E(A,N),H,y),I,s)},C,P)},m.translateBy=function(_,T,C,P){m.transform(_,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),s)},null,P)},m.translateTo=function(_,T,C,P,I){m.transform(_,function(){var A=t.apply(this,arguments),H=this.__zoom,y=P==null?v(A):typeof P=="function"?P.apply(this,arguments):P;return n(on.translate(y[0],y[1]).scale(H.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof C=="function"?-C.apply(this,arguments):-C),A,s)},P,I)};function E(_,T){return T=Math.max(i[0],Math.min(i[1],T)),T===_.k?_:new be(T,_.x,_.y)}function g(_,T,C){var P=T[0]-C[0]*_.k,I=T[1]-C[1]*_.k;return P===_.x&&I===_.y?_:new be(_.k,P,I)}function v(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function M(_,T,C,P){_.on("start.zoom",function(){S(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(P).end()}).tween("zoom",function(){var I=this,A=arguments,H=S(I,A).event(P),y=t.apply(I,A),N=C==null?v(y):typeof C=="function"?C.apply(I,A):C,V=Math.max(y[1][0]-y[0][0],y[1][1]-y[0][1]),O=I.__zoom,Y=typeof T=="function"?T.apply(I,A):T,X=u(O.invert(N).concat(V/O.k),Y.invert(N).concat(V/Y.k));return function(q){if(q===1)q=Y;else{var F=X(q),W=V/F[2];q=new be(W,N[0]-F[0]*W,N[1]-F[1]*W)}H.zoom(null,q)}})}function S(_,T,C){return!C&&_.__zooming||new b(_,T)}function b(_,T){this.that=_,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,T),this.taps=0}b.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,T){return this.mouse&&_!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var T=le(this.that).datum();c.call(_,this.that,new of(_,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:c}),T)}};function D(_,...T){if(!e.apply(this,arguments))return;var C=S(this,T).event(_),P=this.__zoom,I=Math.max(i[0],Math.min(i[1],P.k*Math.pow(2,r.apply(this,arguments)))),A=de(_);if(C.wheel)(C.mouse[0][0]!==A[0]||C.mouse[0][1]!==A[1])&&(C.mouse[1]=P.invert(C.mouse[0]=A)),clearTimeout(C.wheel);else{if(P.k===I)return;C.mouse=[A,P.invert(A)],Vt(this),C.start()}st(_),C.wheel=setTimeout(H,h),C.zoom("mouse",n(g(E(P,I),C.mouse[0],C.mouse[1]),C.extent,s));function H(){C.wheel=null,C.end()}}function z(_,...T){if(d||!e.apply(this,arguments))return;var C=_.currentTarget,P=S(this,T,!0).event(_),I=le(_.view).on("mousemove.zoom",N,!0).on("mouseup.zoom",V,!0),A=de(_,C),H=_.clientX,y=_.clientY;Go(_.view),En(_),P.mouse=[A,this.__zoom.invert(A)],Vt(this),P.start();function N(O){if(st(O),!P.moved){var Y=O.clientX-H,X=O.clientY-y;P.moved=Y*Y+X*X>x}P.event(O).zoom("mouse",n(g(P.that.__zoom,P.mouse[0]=de(O,C),P.mouse[1]),P.extent,s))}function V(O){I.on("mousemove.zoom mouseup.zoom",null),Uo(O.view,P.moved),st(O),P.event(O).end()}}function j(_,...T){if(e.apply(this,arguments)){var C=this.__zoom,P=de(_.changedTouches?_.changedTouches[0]:_,this),I=C.invert(P),A=C.k*(_.shiftKey?.5:2),H=n(g(E(C,A),P,I),t.apply(this,T),s);st(_),a>0?le(this).transition().duration(a).call(M,H,P,_):le(this).call(m.transform,H,P,_)}}function k(_,...T){if(e.apply(this,arguments)){var C=_.touches,P=C.length,I=S(this,T,_.changedTouches.length===P).event(_),A,H,y,N;for(En(_),H=0;H<P;++H)y=C[H],N=de(y,this),N=[N,this.__zoom.invert(N),y.identifier],I.touch0?!I.touch1&&I.touch0[2]!==N[2]&&(I.touch1=N,I.taps=0):(I.touch0=N,A=!0,I.taps=1+!!f);f&&(f=clearTimeout(f)),A&&(I.taps<2&&(l=N[0],f=setTimeout(function(){f=null},p)),Vt(this),I.start())}}function $(_,...T){if(this.__zooming){var C=S(this,T).event(_),P=_.changedTouches,I=P.length,A,H,y,N;for(st(_),A=0;A<I;++A)H=P[A],y=de(H,this),C.touch0&&C.touch0[2]===H.identifier?C.touch0[0]=y:C.touch1&&C.touch1[2]===H.identifier&&(C.touch1[0]=y);if(H=C.that.__zoom,C.touch1){var V=C.touch0[0],O=C.touch0[1],Y=C.touch1[0],X=C.touch1[1],q=(q=Y[0]-V[0])*q+(q=Y[1]-V[1])*q,F=(F=X[0]-O[0])*F+(F=X[1]-O[1])*F;H=E(H,Math.sqrt(q/F)),y=[(V[0]+Y[0])/2,(V[1]+Y[1])/2],N=[(O[0]+X[0])/2,(O[1]+X[1])/2]}else if(C.touch0)y=C.touch0[0],N=C.touch0[1];else return;C.zoom("touch",n(g(H,y,N),C.extent,s))}}function B(_,...T){if(this.__zooming){var C=S(this,T).event(_),P=_.changedTouches,I=P.length,A,H;for(En(_),d&&clearTimeout(d),d=setTimeout(function(){d=null},p),A=0;A<I;++A)H=P[A],C.touch0&&C.touch0[2]===H.identifier?delete C.touch0:C.touch1&&C.touch1[2]===H.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(H=de(H,this),Math.hypot(l[0]-H[0],l[1]-H[1])<w)){var y=le(this).on("dblclick.zoom");y&&y.apply(this,arguments)}}}return m.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:Tt(+_),m):r},m.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Tt(!!_),m):e},m.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:Tt(!!_),m):o},m.extent=function(_){return arguments.length?(t=typeof _=="function"?_:Tt([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),m):t},m.scaleExtent=function(_){return arguments.length?(i[0]=+_[0],i[1]=+_[1],m):[i[0],i[1]]},m.translateExtent=function(_){return arguments.length?(s[0][0]=+_[0][0],s[1][0]=+_[1][0],s[0][1]=+_[0][1],s[1][1]=+_[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(_){return arguments.length?(n=_,m):n},m.duration=function(_){return arguments.length?(a=+_,m):a},m.interpolate=function(_){return arguments.length?(u=_,m):u},m.on=function(){var _=c.on.apply(c,arguments);return _===c?m:_},m.clickDistance=function(_){return arguments.length?(x=(_=+_)*_,m):Math.sqrt(x)},m.tapDistance=function(_){return arguments.length?(w=+_,m):w},m}const we={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},pt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],di=["Enter"," ","Escape"],hi={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ue;(function(e){e.Strict="strict",e.Loose="loose"})(Ue||(Ue={}));var ze;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ze||(ze={}));var mt;(function(e){e.Partial="partial",e.Full="full"})(mt||(mt={}));const gi={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ie;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ie||(Ie={}));var Gt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Gt||(Gt={}));var G;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(G||(G={}));const Yr={[G.Left]:G.Right,[G.Right]:G.Left,[G.Top]:G.Bottom,[G.Bottom]:G.Top};function pi(e){return e===null?null:e?"valid":"invalid"}const mi=e=>"id"in e&&"source"in e&&"target"in e,ff=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),tr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Et=(e,t=[0,0])=>{const{width:n,height:r}=Ne(e),o=e.origin??t,i=n*o[0],s=r*o[1];return{x:e.position.x-i,y:e.position.y-s}},df=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const i=typeof o=="string";let s=!t.nodeLookup&&!i?o:void 0;t.nodeLookup&&(s=i?t.nodeLookup.get(o):tr(o)?o:t.nodeLookup.get(o.id));const a=s?Ut(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return sn(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return an(n)},Je=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(o=>{(t.filter===void 0||t.filter(o))&&(n=sn(n,Ut(o)),r=!0)}),r?an(n):{x:0,y:0,width:0,height:0}},nr=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1)=>{const a={...St(t,[n,r,o]),width:t.width/o,height:t.height/o},u=[];for(const c of e.values()){const{measured:f,selectable:l=!0,hidden:d=!1}=c;if(s&&!l||d)continue;const p=f.width??c.width??c.initialWidth??null,h=f.height??c.height??c.initialHeight??null,x=yt(a,Ke(c)),w=(p??0)*(h??0),m=i&&x>0;(!c.internals.handleBounds||m||x>=w||c.dragging)&&u.push(c)}return u},hf=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function gf(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function pf({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},s){if(e.size===0)return Promise.resolve(!0);const a=gf(e,s),u=Je(a),c=rr(u,t,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??i,(s==null?void 0:s.padding)??.1);return await r.setViewport(c,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)}function yi({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:u,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},f=s.origin??r;let l=s.extent||o;if(s.extent==="parent"&&!s.expandParent)if(!a)i==null||i("005",we.error005());else{const p=a.measured.width,h=a.measured.height;p&&h&&(l=[[u,c],[u+p,c+h]])}else a&&Qe(s.extent)&&(l=[[s.extent[0][0]+u,s.extent[0][1]+c],[s.extent[1][0]+u,s.extent[1][1]+c]]);const d=Qe(l)?He(t,l,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(i==null||i("015",we.error015())),{position:{x:d.x-u+(s.measured.width??0)*f[0],y:d.y-c+(s.measured.height??0)*f[1]},positionAbsolute:d}}async function mf({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map(d=>d.id)),s=[];for(const d of n){if(d.deletable===!1)continue;const p=i.has(d.id),h=!p&&d.parentId&&s.find(x=>x.id===d.parentId);(p||h)&&s.push(d)}const a=new Set(t.map(d=>d.id)),u=r.filter(d=>d.deletable!==!1),f=hf(s,u);for(const d of u)a.has(d.id)&&!f.find(h=>h.id===d.id)&&f.push(d);if(!o)return{edges:f,nodes:s};const l=await o({nodes:s,edges:f});return typeof l=="boolean"?l?{edges:f,nodes:s}:{edges:[],nodes:[]}:l}const Ze=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),He=(e={x:0,y:0},t,n)=>({x:Ze(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Ze(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function xi(e,t,n){const{width:r,height:o}=Ne(n),{x:i,y:s}=n.internals.positionAbsolute;return He(e,[[i,s],[i+r,s+o]],t)}const Xr=(e,t,n)=>e<t?Ze(Math.abs(e-t),1,t)/t:e>n?-Ze(Math.abs(e-n),1,t)/t:0,wi=(e,t,n=15,r=40)=>{const o=Xr(e.x,r,t.width-r)*n,i=Xr(e.y,r,t.height-r)*n;return[o,i]},sn=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Vn=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),an=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ke=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=tr(e)?e.internals.positionAbsolute:Et(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},Ut=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=tr(e)?e.internals.positionAbsolute:Et(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},vi=(e,t)=>an(sn(Vn(e),Vn(t))),yt=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},qr=e=>ge(e.width)&&ge(e.height)&&ge(e.x)&&ge(e.y),ge=e=>!isNaN(e)&&isFinite(e),yf=(e,t)=>{},bt=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),St=({x:e,y:t},[n,r,o],i=!1,s=[1,1])=>{const a={x:(e-n)/o,y:(t-r)/o};return i?bt(a,s):a},Zt=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function je(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function xf(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=je(e,n),o=je(e,t);return{top:r,right:o,bottom:r,left:o,x:o*2,y:r*2}}if(typeof e=="object"){const r=je(e.top??e.y??0,n),o=je(e.bottom??e.y??0,n),i=je(e.left??e.x??0,t),s=je(e.right??e.x??0,t);return{top:r,right:s,bottom:o,left:i,x:i+s,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function wf(e,t,n,r,o,i){const{x:s,y:a}=Zt(e,[t,n,r]),{x:u,y:c}=Zt({x:e.x+e.width,y:e.y+e.height},[t,n,r]),f=o-u,l=i-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(f),bottom:Math.floor(l)}}const rr=(e,t,n,r,o,i)=>{const s=xf(i,t,n),a=(t-s.x)/e.width,u=(n-s.y)/e.height,c=Math.min(a,u),f=Ze(c,r,o),l=e.x+e.width/2,d=e.y+e.height/2,p=t/2-l*f,h=n/2-d*f,x=wf(e,p,h,f,t,n),w={left:Math.min(x.left-s.left,0),top:Math.min(x.top-s.top,0),right:Math.min(x.right-s.right,0),bottom:Math.min(x.bottom-s.bottom,0)};return{x:p-w.left+w.right,y:h-w.top+w.bottom,zoom:f}},xt=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Qe(e){return e!=null&&e!=="parent"}function Ne(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function _i(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Ei(e,t={width:0,height:0},n,r,o){const i={...e},s=r.get(n);if(s){const a=s.origin||o;i.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return i}function Wr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function vf(){let e,t;return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}}function _f(e){return{...hi,...e||{}}}function lt(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:i,y:s}=pe(e),a=St({x:i-((o==null?void 0:o.left)??0),y:s-((o==null?void 0:o.top)??0)},r),{x:u,y:c}=n?bt(a,t):a;return{xSnapped:u,ySnapped:c,...a}}const or=e=>({width:e.offsetWidth,height:e.offsetHeight}),bi=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Ef=["INPUT","SELECT","TEXTAREA"];function Si(e){var r,o;const t=((o=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:o[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Ef.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Ni=e=>"clientX"in e,pe=(e,t)=>{var i,s;const n=Ni(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Gr=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...or(s)}})};function Ci({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:a}){const u=e*.125+o*.375+s*.375+n*.125,c=t*.125+i*.375+a*.375+r*.125,f=Math.abs(u-e),l=Math.abs(c-t);return[u,c,f,l]}function $t(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ur({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case G.Left:return[t-$t(t-r,i),n];case G.Right:return[t+$t(r-t,i),n];case G.Top:return[t,n-$t(n-o,i)];case G.Bottom:return[t,n+$t(o-n,i)]}}function Mi({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:o,targetPosition:i=G.Top,curvature:s=.25}){const[a,u]=Ur({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[c,f]=Ur({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[l,d,p,h]=Ci({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:f});return[`M${e},${t} C${a},${u} ${c},${f} ${r},${o}`,l,d,p,h]}function Ai({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[i,a,o,s]}function bf({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1,zIndexMode:i="basic"}){if(i==="manual")return r;const s=o&&n?r+1e3:r,a=Math.max(e.parentId||o&&e.selected?e.internals.z:0,t.parentId||o&&t.selected?t.internals.z:0);return s+a}function Sf({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=sn(Ut(e),Ut(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return yt(s,an(i))>0}const Ii=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Nf=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Cf=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||Ii;let o;return mi(e)?o={...e}:o={...e,id:r(e)},Nf(o,t)?t:(o.sourceHandle===null&&delete o.sourceHandle,o.targetHandle===null&&delete o.targetHandle,t.concat(o))},Wg=(e,t,n,r={shouldReplaceId:!0})=>{const{id:o,...i}=e;if(!t.source||!t.target||!n.find(c=>c.id===e.id))return n;const a=r.getEdgeId||Ii,u={...i,id:r.shouldReplaceId?a(t):o,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.filter(c=>c.id!==o).concat(u)};function ki({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,a]=Ai({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,a]}const Zr={[G.Left]:{x:-1,y:0},[G.Right]:{x:1,y:0},[G.Top]:{x:0,y:-1},[G.Bottom]:{x:0,y:1}},Mf=({source:e,sourcePosition:t=G.Bottom,target:n})=>t===G.Left||t===G.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Kr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Af({source:e,sourcePosition:t=G.Bottom,target:n,targetPosition:r=G.Top,center:o,offset:i,stepPosition:s}){const a=Zr[t],u=Zr[r],c={x:e.x+a.x*i,y:e.y+a.y*i},f={x:n.x+u.x*i,y:n.y+u.y*i},l=Mf({source:c,sourcePosition:t,target:f}),d=l.x!==0?"x":"y",p=l[d];let h=[],x,w;const m={x:0,y:0},E={x:0,y:0},[,,g,v]=Ai({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*u[d]===-1){d==="x"?(x=o.x??c.x+(f.x-c.x)*s,w=o.y??(c.y+f.y)/2):(x=o.x??(c.x+f.x)/2,w=o.y??c.y+(f.y-c.y)*s);const S=[{x,y:c.y},{x,y:f.y}],b=[{x:c.x,y:w},{x:f.x,y:w}];a[d]===p?h=d==="x"?S:b:h=d==="x"?b:S}else{const S=[{x:c.x,y:f.y}],b=[{x:f.x,y:c.y}];if(d==="x"?h=a.x===p?b:S:h=a.y===p?S:b,t===r){const $=Math.abs(e[d]-n[d]);if($<=i){const B=Math.min(i-1,i-$);a[d]===p?m[d]=(c[d]>e[d]?-1:1)*B:E[d]=(f[d]>n[d]?-1:1)*B}}if(t!==r){const $=d==="x"?"y":"x",B=a[d]===u[$],_=c[$]>f[$],T=c[$]<f[$];(a[d]===1&&(!B&&_||B&&T)||a[d]!==1&&(!B&&T||B&&_))&&(h=d==="x"?S:b)}const D={x:c.x+m.x,y:c.y+m.y},z={x:f.x+E.x,y:f.y+E.y},j=Math.max(Math.abs(D.x-h[0].x),Math.abs(z.x-h[0].x)),k=Math.max(Math.abs(D.y-h[0].y),Math.abs(z.y-h[0].y));j>=k?(x=(D.x+z.x)/2,w=h[0].y):(x=h[0].x,w=(D.y+z.y)/2)}return[[e,{x:c.x+m.x,y:c.y+m.y},...h,{x:f.x+E.x,y:f.y+E.y},n],x,w,g,v]}function If(e,t,n,r){const o=Math.min(Kr(e,t)/2,Kr(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${i+o*c},${s}Q ${i},${s} ${i},${s+o*f}`}const a=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${i},${s+o*u}Q ${i},${s} ${i+o*a},${s}`}function Bn({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:o,targetPosition:i=G.Top,borderRadius:s=5,centerX:a,centerY:u,offset:c=20,stepPosition:f=.5}){const[l,d,p,h,x]=Af({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:a,y:u},offset:c,stepPosition:f});return[l.reduce((m,E,g)=>{let v="";return g>0&&g<l.length-1?v=If(l[g-1],E,l[g+1],s):v=`${g===0?"M":"L"}${E.x} ${E.y}`,m+=v,m},""),d,p,h,x]}function Qr(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function kf(e){var l;const{sourceNode:t,targetNode:n}=e;if(!Qr(t)||!Qr(n))return null;const r=t.internals.handleBounds||Jr(t.handles),o=n.internals.handleBounds||Jr(n.handles),i=eo((r==null?void 0:r.source)??[],e.sourceHandle),s=eo(e.connectionMode===Ue.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!i||!s)return(l=e.onError)==null||l.call(e,"008",we.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(i==null?void 0:i.position)||G.Bottom,u=(s==null?void 0:s.position)||G.Top,c=Oe(t,i,a),f=Oe(n,s,u);return{sourceX:c.x,sourceY:c.y,targetX:f.x,targetY:f.y,sourcePosition:a,targetPosition:u}}function Jr(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Oe(e,t,n=G.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Ne(e);if(r)return{x:o+s/2,y:i+a/2};switch((t==null?void 0:t.position)??n){case G.Top:return{x:o+s/2,y:i};case G.Right:return{x:o+s,y:i+a/2};case G.Bottom:return{x:o+s/2,y:i+a};case G.Left:return{x:o,y:i+a/2}}}function eo(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function jn(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Tf(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||o].forEach(u=>{if(u&&typeof u=="object"){const c=jn(u,t);i.has(c)||(s.push({id:c,color:u.color||n,...u}),i.add(c))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}function $f(e,t,n,r,o){let i=.5;o==="start"?i=0:o==="end"&&(i=1);let s=[(e.x+e.width*i)*t.zoom+t.x,e.y*t.zoom+t.y-r],a=[-100*i,-100];switch(n){case G.Right:s=[(e.x+e.width)*t.zoom+t.x+r,(e.y+e.height*i)*t.zoom+t.y],a=[0,-100*i];break;case G.Bottom:s[1]=(e.y+e.height)*t.zoom+t.y+r,a[1]=0;break;case G.Left:s=[e.x*t.zoom+t.x-r,(e.y+e.height*i)*t.zoom+t.y],a=[-100,-100*i];break}return`translate(${s[0]}px, ${s[1]}px) translate(${a[0]}%, ${a[1]}%)`}const Ti=1e3,Pf=10,ir={nodeOrigin:[0,0],nodeExtent:pt,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},Rf={...ir,checkEquality:!0};function sr(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function zf(e,t,n){const r=sr(ir,n);for(const o of e.values())if(o.parentId)cr(o,e,t,r);else{const i=Et(o,r.nodeOrigin),s=Qe(o.extent)?o.extent:r.nodeExtent,a=He(i,s,Ne(o));o.internals.positionAbsolute=a}}function Df(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const o of e.handles){const i={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?n.push(i):o.type==="target"&&r.push(i)}return{source:n,target:r}}function ar(e){return e==="manual"}function Fn(e,t,n,r={}){var c,f;const o=sr(Rf,r),i={i:0},s=new Map(t),a=o!=null&&o.elevateNodesOnSelect&&!ar(o.zIndexMode)?Ti:0;let u=e.length>0;t.clear(),n.clear();for(const l of e){let d=s.get(l.id);if(o.checkEquality&&l===(d==null?void 0:d.internals.userNode))t.set(l.id,d);else{const p=Et(l,o.nodeOrigin),h=Qe(l.extent)?l.extent:o.nodeExtent,x=He(p,h,Ne(l));d={...o.defaults,...l,measured:{width:(c=l.measured)==null?void 0:c.width,height:(f=l.measured)==null?void 0:f.height},internals:{positionAbsolute:x,handleBounds:Df(l,d),z:$i(l,a,o.zIndexMode),userNode:l}},t.set(l.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(u=!1),l.parentId&&cr(d,t,n,r,i)}return u}function Lf(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function cr(e,t,n,r,o){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:a,zIndexMode:u}=sr(ir,r),c=e.parentId,f=t.get(c);if(!f){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Lf(e,n),o&&!f.parentId&&f.internals.rootParentIndex===void 0&&u==="auto"&&(f.internals.rootParentIndex=++o.i,f.internals.z=f.internals.z+o.i*Pf),o&&f.internals.rootParentIndex!==void 0&&(o.i=f.internals.rootParentIndex);const l=i&&!ar(u)?Ti:0,{x:d,y:p,z:h}=Hf(e,f,s,a,l,u),{positionAbsolute:x}=e.internals,w=d!==x.x||p!==x.y;(w||h!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:w?{x:d,y:p}:x,z:h}})}function $i(e,t,n){const r=ge(e.zIndex)?e.zIndex:0;return ar(n)?r:r+(e.selected?t:0)}function Hf(e,t,n,r,o,i){const{x:s,y:a}=t.internals.positionAbsolute,u=Ne(e),c=Et(e,n),f=Qe(e.extent)?He(c,e.extent,u):c;let l=He({x:s+f.x,y:a+f.y},r,u);e.extent==="parent"&&(l=xi(l,u,t));const d=$i(e,o,i),p=t.internals.z??0;return{x:l.x,y:l.y,z:p>=d?p+1:d}}function ur(e,t,n,r=[0,0]){var s;const o=[],i=new Map;for(const a of e){const u=t.get(a.parentId);if(!u)continue;const c=((s=i.get(a.parentId))==null?void 0:s.expandedRect)??Ke(u),f=vi(c,a.rect);i.set(a.parentId,{expandedRect:f,parent:u})}return i.size>0&&i.forEach(({expandedRect:a,parent:u},c)=>{var g;const f=u.internals.positionAbsolute,l=Ne(u),d=u.origin??r,p=a.x<f.x?Math.round(Math.abs(f.x-a.x)):0,h=a.y<f.y?Math.round(Math.abs(f.y-a.y)):0,x=Math.max(l.width,Math.round(a.width)),w=Math.max(l.height,Math.round(a.height)),m=(x-l.width)*d[0],E=(w-l.height)*d[1];(p>0||h>0||m||E)&&(o.push({id:c,type:"position",position:{x:u.position.x-p+m,y:u.position.y-h+E}}),(g=n.get(c))==null||g.forEach(v=>{e.some(M=>M.id===v.id)||o.push({id:v.id,type:"position",position:{x:v.position.x+p,y:v.position.y+h}})})),(l.width<a.width||l.height<a.height||p||h)&&o.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:x+(p?d[0]*p-m:0),height:w+(h?d[1]*h-E:0)}})}),o}function Of(e,t,n,r,o,i,s){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let u=!1;if(!a)return{changes:[],updatedInternals:u};const c=[],f=window.getComputedStyle(a),{m22:l}=new window.DOMMatrixReadOnly(f.transform),d=[];for(const p of e.values()){const h=t.get(p.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),u=!0;continue}const x=or(p.nodeElement),w=h.measured.width!==x.width||h.measured.height!==x.height;if(!!(x.width&&x.height&&(w||!h.internals.handleBounds||p.force))){const E=p.nodeElement.getBoundingClientRect(),g=Qe(h.extent)?h.extent:i;let{positionAbsolute:v}=h.internals;h.parentId&&h.extent==="parent"?v=xi(v,x,t.get(h.parentId)):g&&(v=He(v,g,x));const M={...h,measured:x,internals:{...h.internals,positionAbsolute:v,handleBounds:{source:Gr("source",p.nodeElement,E,l,h.id),target:Gr("target",p.nodeElement,E,l,h.id)}}};t.set(h.id,M),h.parentId&&cr(M,t,n,{nodeOrigin:o,zIndexMode:s}),u=!0,w&&(c.push({id:h.id,type:"dimensions",dimensions:x}),h.expandParent&&h.parentId&&d.push({id:h.id,parentId:h.parentId,rect:Ke(M,o)}))}}if(d.length>0){const p=ur(d,t,n,o);c.push(...p)}return{changes:c,updatedInternals:u}}async function Vf({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function to(e,t,n,r,o,i){let s=o;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${o}-${e}`;const u=r.get(s)||new Map;if(r.set(s,u.set(n,t)),i){s=`${o}-${e}-${i}`;const c=r.get(s)||new Map;r.set(s,c.set(n,t))}}function Pi(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:i,sourceHandle:s=null,targetHandle:a=null}=r,u={edgeId:r.id,source:o,target:i,sourceHandle:s,targetHandle:a},c=`${o}-${s}--${i}-${a}`,f=`${i}-${a}--${o}-${s}`;to("source",u,f,e,o,s),to("target",u,c,e,i,a),t.set(r.id,r)}}function Ri(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Ri(n,t):!1}function no(e,t,n){var o;let r=e;do{if((o=r==null?void 0:r.matches)!=null&&o.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function Bf(e,t,n,r){const o=new Map;for(const[i,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!Ri(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(i);a&&o.set(i,{id:i,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return o}function bn({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,u;const o=[];for(const[c,f]of t){const l=(s=n.get(c))==null?void 0:s.internals.userNode;l&&o.push({...l,position:f.position,dragging:r})}if(!e)return[o[0],o];const i=(a=n.get(e))==null?void 0:a.internals.userNode;return[i?{...i,position:((u=t.get(e))==null?void 0:u.position)||i.position,dragging:r}:o[0],o]}function jf({dragItems:e,snapGrid:t,x:n,y:r}){const o=e.values().next().value;if(!o)return null;const i={x:n-o.distance.x,y:r-o.distance.y},s=bt(i,t);return{x:s.x-i.x,y:s.y-i.y}}function Ff({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},s=0,a=new Map,u=!1,c={x:0,y:0},f=null,l=!1,d=null,p=!1,h=!1,x=null;function w({noDragClassName:E,handleSelector:g,domNode:v,isSelectable:M,nodeId:S,nodeClickDistance:b=0}){d=le(v);function D({x:$,y:B}){const{nodeLookup:_,nodeExtent:T,snapGrid:C,snapToGrid:P,nodeOrigin:I,onNodeDrag:A,onSelectionDrag:H,onError:y,updateNodePositions:N}=t();i={x:$,y:B};let V=!1;const O=a.size>1,Y=O&&T?Vn(Je(a)):null,X=O&&P?jf({dragItems:a,snapGrid:C,x:$,y:B}):null;for(const[q,F]of a){if(!_.has(q))continue;let W={x:$-F.distance.x,y:B-F.distance.y};P&&(W=X?{x:Math.round(W.x+X.x),y:Math.round(W.y+X.y)}:bt(W,C));let ee=null;if(O&&T&&!F.extent&&Y){const{positionAbsolute:U}=F.internals,ne=U.x-Y.x+T[0][0],oe=U.x+F.measured.width-Y.x2+T[1][0],te=U.y-Y.y+T[0][1],ae=U.y+F.measured.height-Y.y2+T[1][1];ee=[[ne,te],[oe,ae]]}const{position:Q,positionAbsolute:Z}=yi({nodeId:q,nextPosition:W,nodeLookup:_,nodeExtent:ee||T,nodeOrigin:I,onError:y});V=V||F.position.x!==Q.x||F.position.y!==Q.y,F.position=Q,F.internals.positionAbsolute=Z}if(h=h||V,!!V&&(N(a,!0),x&&(r||A||!S&&H))){const[q,F]=bn({nodeId:S,dragItems:a,nodeLookup:_});r==null||r(x,a,q,F),A==null||A(x,q,F),S||H==null||H(x,F)}}async function z(){if(!f)return;const{transform:$,panBy:B,autoPanSpeed:_,autoPanOnNodeDrag:T}=t();if(!T){u=!1,cancelAnimationFrame(s);return}const[C,P]=wi(c,f,_);(C!==0||P!==0)&&(i.x=(i.x??0)-C/$[2],i.y=(i.y??0)-P/$[2],await B({x:C,y:P})&&D(i)),s=requestAnimationFrame(z)}function j($){var O;const{nodeLookup:B,multiSelectionActive:_,nodesDraggable:T,transform:C,snapGrid:P,snapToGrid:I,selectNodesOnDrag:A,onNodeDragStart:H,onSelectionDragStart:y,unselectNodesAndEdges:N}=t();l=!0,(!A||!M)&&!_&&S&&((O=B.get(S))!=null&&O.selected||N()),M&&A&&S&&(e==null||e(S));const V=lt($.sourceEvent,{transform:C,snapGrid:P,snapToGrid:I,containerBounds:f});if(i=V,a=Bf(B,T,V,S),a.size>0&&(n||H||!S&&y)){const[Y,X]=bn({nodeId:S,dragItems:a,nodeLookup:B});n==null||n($.sourceEvent,a,Y,X),H==null||H($.sourceEvent,Y,X),S||y==null||y($.sourceEvent,X)}}const k=Zo().clickDistance(b).on("start",$=>{const{domNode:B,nodeDragThreshold:_,transform:T,snapGrid:C,snapToGrid:P}=t();f=(B==null?void 0:B.getBoundingClientRect())||null,p=!1,h=!1,x=$.sourceEvent,_===0&&j($),i=lt($.sourceEvent,{transform:T,snapGrid:C,snapToGrid:P,containerBounds:f}),c=pe($.sourceEvent,f)}).on("drag",$=>{const{autoPanOnNodeDrag:B,transform:_,snapGrid:T,snapToGrid:C,nodeDragThreshold:P,nodeLookup:I}=t(),A=lt($.sourceEvent,{transform:_,snapGrid:T,snapToGrid:C,containerBounds:f});if(x=$.sourceEvent,($.sourceEvent.type==="touchmove"&&$.sourceEvent.touches.length>1||S&&!I.has(S))&&(p=!0),!p){if(!u&&B&&l&&(u=!0,z()),!l){const H=pe($.sourceEvent,f),y=H.x-c.x,N=H.y-c.y;Math.sqrt(y*y+N*N)>P&&j($)}(i.x!==A.xSnapped||i.y!==A.ySnapped)&&a&&l&&(c=pe($.sourceEvent,f),D(A))}}).on("end",$=>{if(!(!l||p)&&(u=!1,l=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:B,updateNodePositions:_,onNodeDragStop:T,onSelectionDragStop:C}=t();if(h&&(_(a,!1),h=!1),o||T||!S&&C){const[P,I]=bn({nodeId:S,dragItems:a,nodeLookup:B,dragging:!1});o==null||o($.sourceEvent,a,P,I),T==null||T($.sourceEvent,P,I),S||C==null||C($.sourceEvent,I)}}}).filter($=>{const B=$.target;return!$.button&&(!E||!no(B,`.${E}`,v))&&(!g||no(B,g,v))});d.call(k)}function m(){d==null||d.on(".drag",null)}return{update:w,destroy:m}}function Yf(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())yt(o,Ke(i))>0&&r.push(i);return r}const Xf=250;function qf(e,t,n,r){var a,u;let o=[],i=1/0;const s=Yf(e,n,t+Xf);for(const c of s){const f=[...((a=c.internals.handleBounds)==null?void 0:a.source)??[],...((u=c.internals.handleBounds)==null?void 0:u.target)??[]];for(const l of f){if(r.nodeId===l.nodeId&&r.type===l.type&&r.id===l.id)continue;const{x:d,y:p}=Oe(c,l,l.position,!0),h=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(p-e.y,2));h>t||(h<i?(o=[{...l,x:d,y:p}],i=h):h===i&&o.push({...l,x:d,y:p}))}}if(!o.length)return null;if(o.length>1){const c=r.type==="source"?"target":"source";return o.find(f=>f.type===c)??o[0]}return o[0]}function zi(e,t,n,r,o,i=!1){var c,f,l;const s=r.get(e);if(!s)return null;const a=o==="strict"?(c=s.internals.handleBounds)==null?void 0:c[t]:[...((f=s.internals.handleBounds)==null?void 0:f.source)??[],...((l=s.internals.handleBounds)==null?void 0:l.target)??[]],u=(n?a==null?void 0:a.find(d=>d.id===n):a==null?void 0:a[0])??null;return u&&i?{...u,...Oe(s,u,u.position,!0)}:u}function Di(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Wf(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Li=()=>!0;function Gf(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:u,lib:c,autoPanOnConnect:f,flowId:l,panBy:d,cancelConnection:p,onConnectStart:h,onConnect:x,onConnectEnd:w,isValidConnection:m=Li,onReconnectEnd:E,updateConnection:g,getTransform:v,getFromHandle:M,autoPanSpeed:S,dragThreshold:b=1,handleDomNode:D}){const z=bi(e.target);let j=0,k;const{x:$,y:B}=pe(e),_=Di(i,D),T=a==null?void 0:a.getBoundingClientRect();let C=!1;if(!T||!_)return;const P=zi(o,_,r,u,t);if(!P)return;let I=pe(e,T),A=!1,H=null,y=!1,N=null;function V(){if(!f||!T)return;const[Q,Z]=wi(I,T,S);d({x:Q,y:Z}),j=requestAnimationFrame(V)}const O={...P,nodeId:o,type:_,position:P.position},Y=u.get(o);let q={inProgress:!0,isValid:null,from:Oe(Y,O,G.Left,!0),fromHandle:O,fromPosition:O.position,fromNode:Y,to:I,toHandle:null,toPosition:Yr[O.position],toNode:null,pointer:I};function F(){C=!0,g(q),h==null||h(e,{nodeId:o,handleId:r,handleType:_})}b===0&&F();function W(Q){if(!C){const{x:ae,y:Ce}=pe(Q),_e=ae-$,Te=Ce-B;if(!(_e*_e+Te*Te>b*b))return;F()}if(!M()||!O){ee(Q);return}const Z=v();I=pe(Q,T),k=qf(St(I,Z,!1,[1,1]),n,u,O),A||(V(),A=!0);const U=Hi(Q,{handle:k,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:s?"target":"source",isValidConnection:m,doc:z,lib:c,flowId:l,nodeLookup:u});N=U.handleDomNode,H=U.connection,y=Wf(!!k,U.isValid);const ne=u.get(o),oe=ne?Oe(ne,O,G.Left,!0):q.from,te={...q,from:oe,isValid:y,to:U.toHandle&&y?Zt({x:U.toHandle.x,y:U.toHandle.y},Z):I,toHandle:U.toHandle,toPosition:y&&U.toHandle?U.toHandle.position:Yr[O.position],toNode:U.toHandle?u.get(U.toHandle.nodeId):null,pointer:I};g(te),q=te}function ee(Q){if(!("touches"in Q&&Q.touches.length>0)){if(C){(k||N)&&H&&y&&(x==null||x(H));const{inProgress:Z,...U}=q,ne={...U,toPosition:q.toHandle?q.toPosition:null};w==null||w(Q,ne),i&&(E==null||E(Q,ne))}p(),cancelAnimationFrame(j),A=!1,y=!1,H=null,N=null,z.removeEventListener("mousemove",W),z.removeEventListener("mouseup",ee),z.removeEventListener("touchmove",W),z.removeEventListener("touchend",ee)}}z.addEventListener("mousemove",W),z.addEventListener("mouseup",ee),z.addEventListener("touchmove",W),z.addEventListener("touchend",ee)}function Hi(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:s,lib:a,flowId:u,isValidConnection:c=Li,nodeLookup:f}){const l=i==="target",d=t?s.querySelector(`.${a}-flow__handle[data-id="${u}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:p,y:h}=pe(e),x=s.elementFromPoint(p,h),w=x!=null&&x.classList.contains(`${a}-flow__handle`)?x:d,m={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const E=Di(void 0,w),g=w.getAttribute("data-nodeid"),v=w.getAttribute("data-handleid"),M=w.classList.contains("connectable"),S=w.classList.contains("connectableend");if(!g||!E)return m;const b={source:l?g:r,sourceHandle:l?v:o,target:l?r:g,targetHandle:l?o:v};m.connection=b;const z=M&&S&&(n===Ue.Strict?l&&E==="source"||!l&&E==="target":g!==r||v!==o);m.isValid=z&&c(b),m.toHandle=zi(g,E,v,f,n,!0)}return m}const Yn={onPointerDown:Gf,isValid:Hi};function Uf({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=le(e);function i({translateExtent:a,width:u,height:c,zoomStep:f=1,pannable:l=!0,zoomable:d=!0,inversePan:p=!1}){const h=g=>{if(g.sourceEvent.type!=="wheel"||!t)return;const v=n(),M=g.sourceEvent.ctrlKey&&xt()?10:1,S=-g.sourceEvent.deltaY*(g.sourceEvent.deltaMode===1?.05:g.sourceEvent.deltaMode?1:.002)*f,b=v[2]*Math.pow(2,S*M);t.scaleTo(b)};let x=[0,0];const w=g=>{(g.sourceEvent.type==="mousedown"||g.sourceEvent.type==="touchstart")&&(x=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY])},m=g=>{const v=n();if(g.sourceEvent.type!=="mousemove"&&g.sourceEvent.type!=="touchmove"||!t)return;const M=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY],S=[M[0]-x[0],M[1]-x[1]];x=M;const b=r()*Math.max(v[2],Math.log(v[2]))*(p?-1:1),D={x:v[0]-S[0]*b,y:v[1]-S[1]*b},z=[[0,0],[u,c]];t.setViewportConstrained({x:D.x,y:D.y,zoom:v[2]},z,a)},E=fi().on("start",w).on("zoom",l?m:null).on("zoom.wheel",d?h:null);o.call(E,{})}function s(){o.on("zoom",null)}return{update:i,destroy:s,pointer:de}}const cn=e=>({x:e.x,y:e.y,zoom:e.k}),Sn=({x:e,y:t,zoom:n})=>on.translate(e,t).scale(n),Fe=(e,t)=>e.target.closest(`.${t}`),Oi=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Zf=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Nn=(e,t=0,n=Zf,r=()=>{})=>{const o=typeof t=="number"&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e},Vi=e=>{const t=e.ctrlKey&&xt()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Kf({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:u,onPanZoomEnd:c}){return f=>{if(Fe(f,t))return f.ctrlKey&&f.preventDefault(),!1;f.preventDefault(),f.stopImmediatePropagation();const l=n.property("__zoom").k||1;if(f.ctrlKey&&s){const w=de(f),m=Vi(f),E=l*Math.pow(2,m);r.scaleTo(n,E,w,f);return}const d=f.deltaMode===1?20:1;let p=o===ze.Vertical?0:f.deltaX*d,h=o===ze.Horizontal?0:f.deltaY*d;!xt()&&f.shiftKey&&o!==ze.Vertical&&(p=f.deltaY*d,h=0),r.translateBy(n,-(p/l)*i,-(h/l)*i,{internal:!0});const x=cn(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(u==null||u(f,x),e.panScrollTimeout=setTimeout(()=>{c==null||c(f,x),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(f,x))}}function Qf({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){const i=r.type==="wheel",s=!t&&i&&!r.ctrlKey,a=Fe(r,e);if(r.ctrlKey&&i&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,o)}}function Jf({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var i,s,a;if((i=r.sourceEvent)!=null&&i.internal)return;const o=cn(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function ed({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{var s,a;e.usedRightMouseButton=!!(n&&Oi(t,e.mouseButton??0)),(s=i.sourceEvent)!=null&&s.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!((a=i.sourceEvent)!=null&&a.internal)&&(o==null||o(i.sourceEvent,cn(i.transform)))}}function td({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,i&&Oi(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),o)){const u=cn(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,u)},n?150:0)}}}function nd({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:u,lib:c,connectionInProgress:f}){return l=>{var w;const d=e||t,p=n&&l.ctrlKey,h=l.type==="wheel";if(l.button===1&&l.type==="mousedown"&&(Fe(l,`${c}-flow__node`)||Fe(l,`${c}-flow__edge`)))return!0;if(!r&&!d&&!o&&!i&&!n||s||f&&!h||Fe(l,a)&&h||Fe(l,u)&&(!h||o&&h&&!e)||!n&&l.ctrlKey&&h)return!1;if(!n&&l.type==="touchstart"&&((w=l.touches)==null?void 0:w.length)>1)return l.preventDefault(),!1;if(!d&&!o&&!p&&h||!r&&(l.type==="mousedown"||l.type==="touchstart")||Array.isArray(r)&&!r.includes(l.button)&&l.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(l.button)||!l.button||l.button<=1;return(!l.ctrlKey||h)&&x}}function rd({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:o,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),l=fi().scaleExtent([t,n]).translateExtent(r),d=le(e).call(l);E({x:o.x,y:o.y,zoom:Ze(o.zoom,t,n)},[[0,0],[f.width,f.height]],r);const p=d.on("wheel.zoom"),h=d.on("dblclick.zoom");l.wheelDelta(Vi);function x(k,$){return d?new Promise(B=>{l==null||l.interpolate(($==null?void 0:$.interpolate)==="linear"?ut:Lt).transform(Nn(d,$==null?void 0:$.duration,$==null?void 0:$.ease,()=>B(!0)),k)}):Promise.resolve(!1)}function w({noWheelClassName:k,noPanClassName:$,onPaneContextMenu:B,userSelectionActive:_,panOnScroll:T,panOnDrag:C,panOnScrollMode:P,panOnScrollSpeed:I,preventScrolling:A,zoomOnPinch:H,zoomOnScroll:y,zoomOnDoubleClick:N,zoomActivationKeyPressed:V,lib:O,onTransformChange:Y,connectionInProgress:X,paneClickDistance:q,selectionOnDrag:F}){_&&!c.isZoomingOrPanning&&m();const W=T&&!V&&!_;l.clickDistance(F?1/0:!ge(q)||q<0?0:q);const ee=W?Kf({zoomPanValues:c,noWheelClassName:k,d3Selection:d,d3Zoom:l,panOnScrollMode:P,panOnScrollSpeed:I,zoomOnPinch:H,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:a}):Qf({noWheelClassName:k,preventScrolling:A,d3ZoomHandler:p});if(d.on("wheel.zoom",ee,{passive:!1}),!_){const Z=Jf({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:s});l.on("start",Z);const U=ed({zoomPanValues:c,panOnDrag:C,onPaneContextMenu:!!B,onPanZoom:i,onTransformChange:Y});l.on("zoom",U);const ne=td({zoomPanValues:c,panOnDrag:C,panOnScroll:T,onPaneContextMenu:B,onPanZoomEnd:a,onDraggingChange:u});l.on("end",ne)}const Q=nd({zoomActivationKeyPressed:V,panOnDrag:C,zoomOnScroll:y,panOnScroll:T,zoomOnDoubleClick:N,zoomOnPinch:H,userSelectionActive:_,noPanClassName:$,noWheelClassName:k,lib:O,connectionInProgress:X});l.filter(Q),N?d.on("dblclick.zoom",h):d.on("dblclick.zoom",null)}function m(){l.on("zoom",null)}async function E(k,$,B){const _=Sn(k),T=l==null?void 0:l.constrain()(_,$,B);return T&&await x(T),new Promise(C=>C(T))}async function g(k,$){const B=Sn(k);return await x(B,$),new Promise(_=>_(B))}function v(k){if(d){const $=Sn(k),B=d.property("__zoom");(B.k!==k.zoom||B.x!==k.x||B.y!==k.y)&&(l==null||l.transform(d,$,null,{sync:!0}))}}function M(){const k=d?li(d.node()):{x:0,y:0,k:1};return{x:k.x,y:k.y,zoom:k.k}}function S(k,$){return d?new Promise(B=>{l==null||l.interpolate(($==null?void 0:$.interpolate)==="linear"?ut:Lt).scaleTo(Nn(d,$==null?void 0:$.duration,$==null?void 0:$.ease,()=>B(!0)),k)}):Promise.resolve(!1)}function b(k,$){return d?new Promise(B=>{l==null||l.interpolate(($==null?void 0:$.interpolate)==="linear"?ut:Lt).scaleBy(Nn(d,$==null?void 0:$.duration,$==null?void 0:$.ease,()=>B(!0)),k)}):Promise.resolve(!1)}function D(k){l==null||l.scaleExtent(k)}function z(k){l==null||l.translateExtent(k)}function j(k){const $=!ge(k)||k<0?0:k;l==null||l.clickDistance($)}return{update:w,destroy:m,setViewport:g,setViewportConstrained:E,getViewport:M,scaleTo:S,scaleBy:b,setScaleExtent:D,setTranslateExtent:z,syncViewport:v,setClickDistance:j}}var Ve;(function(e){e.Line="line",e.Handle="handle"})(Ve||(Ve={}));const od=["top-left","top-right","bottom-left","bottom-right"],id=["top","right","bottom","left"];function sd({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const s=e-t,a=n-r,u=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&o&&(u[0]=u[0]*-1),a&&i&&(u[1]=u[1]*-1),u}function ro(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function Me(e,t){return Math.max(0,t-e)}function Ae(e,t){return Math.max(0,e-t)}function Pt(e,t,n){return Math.max(0,t-e,e-n)}function oo(e,t){return e?!t:t}function ad(e,t,n,r,o,i,s,a){let{affectsX:u,affectsY:c}=t;const{isHorizontal:f,isVertical:l}=t,d=f&&l,{xSnapped:p,ySnapped:h}=n,{minWidth:x,maxWidth:w,minHeight:m,maxHeight:E}=r,{x:g,y:v,width:M,height:S,aspectRatio:b}=e;let D=Math.floor(f?p-e.pointerX:0),z=Math.floor(l?h-e.pointerY:0);const j=M+(u?-D:D),k=S+(c?-z:z),$=-i[0]*M,B=-i[1]*S;let _=Pt(j,x,w),T=Pt(k,m,E);if(s){let I=0,A=0;u&&D<0?I=Me(g+D+$,s[0][0]):!u&&D>0&&(I=Ae(g+j+$,s[1][0])),c&&z<0?A=Me(v+z+B,s[0][1]):!c&&z>0&&(A=Ae(v+k+B,s[1][1])),_=Math.max(_,I),T=Math.max(T,A)}if(a){let I=0,A=0;u&&D>0?I=Ae(g+D,a[0][0]):!u&&D<0&&(I=Me(g+j,a[1][0])),c&&z>0?A=Ae(v+z,a[0][1]):!c&&z<0&&(A=Me(v+k,a[1][1])),_=Math.max(_,I),T=Math.max(T,A)}if(o){if(f){const I=Pt(j/b,m,E)*b;if(_=Math.max(_,I),s){let A=0;!u&&!c||u&&!c&&d?A=Ae(v+B+j/b,s[1][1])*b:A=Me(v+B+(u?D:-D)/b,s[0][1])*b,_=Math.max(_,A)}if(a){let A=0;!u&&!c||u&&!c&&d?A=Me(v+j/b,a[1][1])*b:A=Ae(v+(u?D:-D)/b,a[0][1])*b,_=Math.max(_,A)}}if(l){const I=Pt(k*b,x,w)/b;if(T=Math.max(T,I),s){let A=0;!u&&!c||c&&!u&&d?A=Ae(g+k*b+$,s[1][0])/b:A=Me(g+(c?z:-z)*b+$,s[0][0])/b,T=Math.max(T,A)}if(a){let A=0;!u&&!c||c&&!u&&d?A=Me(g+k*b,a[1][0])/b:A=Ae(g+(c?z:-z)*b,a[0][0])/b,T=Math.max(T,A)}}}z=z+(z<0?T:-T),D=D+(D<0?_:-_),o&&(d?j>k*b?z=(oo(u,c)?-D:D)/b:D=(oo(u,c)?-z:z)*b:f?(z=D/b,c=u):(D=z*b,u=c));const C=u?g+D:g,P=c?v+z:v;return{width:M+(u?-D:D),height:S+(c?-z:z),x:i[0]*D*(u?-1:1)+C,y:i[1]*z*(c?-1:1)+P}}const Bi={width:0,height:0,x:0,y:0},cd={...Bi,pointerX:0,pointerY:0,aspectRatio:1};function ud(e){return[[0,0],[e.measured.width,e.measured.height]]}function ld(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,u=n[1]*s;return[[r-a,o-u],[r+i-a,o+s-u]]}function fd({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=le(e);let s={controlDirection:ro("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function a({controlPosition:c,boundaries:f,keepAspectRatio:l,resizeDirection:d,onResizeStart:p,onResize:h,onResizeEnd:x,shouldResize:w}){let m={...Bi},E={...cd};s={boundaries:f,resizeDirection:d,keepAspectRatio:l,controlDirection:ro(c)};let g,v=null,M=[],S,b,D,z=!1;const j=Zo().on("start",k=>{const{nodeLookup:$,transform:B,snapGrid:_,snapToGrid:T,nodeOrigin:C,paneDomNode:P}=n();if(g=$.get(t),!g)return;v=(P==null?void 0:P.getBoundingClientRect())??null;const{xSnapped:I,ySnapped:A}=lt(k.sourceEvent,{transform:B,snapGrid:_,snapToGrid:T,containerBounds:v});m={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},E={...m,pointerX:I,pointerY:A,aspectRatio:m.width/m.height},S=void 0,g.parentId&&(g.extent==="parent"||g.expandParent)&&(S=$.get(g.parentId),b=S&&g.extent==="parent"?ud(S):void 0),M=[],D=void 0;for(const[H,y]of $)if(y.parentId===t&&(M.push({id:H,position:{...y.position},extent:y.extent}),y.extent==="parent"||y.expandParent)){const N=ld(y,g,y.origin??C);D?D=[[Math.min(N[0][0],D[0][0]),Math.min(N[0][1],D[0][1])],[Math.max(N[1][0],D[1][0]),Math.max(N[1][1],D[1][1])]]:D=N}p==null||p(k,{...m})}).on("drag",k=>{const{transform:$,snapGrid:B,snapToGrid:_,nodeOrigin:T}=n(),C=lt(k.sourceEvent,{transform:$,snapGrid:B,snapToGrid:_,containerBounds:v}),P=[];if(!g)return;const{x:I,y:A,width:H,height:y}=m,N={},V=g.origin??T,{width:O,height:Y,x:X,y:q}=ad(E,s.controlDirection,C,s.boundaries,s.keepAspectRatio,V,b,D),F=O!==H,W=Y!==y,ee=X!==I&&F,Q=q!==A&&W;if(!ee&&!Q&&!F&&!W)return;if((ee||Q||V[0]===1||V[1]===1)&&(N.x=ee?X:m.x,N.y=Q?q:m.y,m.x=N.x,m.y=N.y,M.length>0)){const oe=X-I,te=q-A;for(const ae of M)ae.position={x:ae.position.x-oe+V[0]*(O-H),y:ae.position.y-te+V[1]*(Y-y)},P.push(ae)}if((F||W)&&(N.width=F&&(!s.resizeDirection||s.resizeDirection==="horizontal")?O:m.width,N.height=W&&(!s.resizeDirection||s.resizeDirection==="vertical")?Y:m.height,m.width=N.width,m.height=N.height),S&&g.expandParent){const oe=V[0]*(N.width??0);N.x&&N.x<oe&&(m.x=oe,E.x=E.x-(N.x-oe));const te=V[1]*(N.height??0);N.y&&N.y<te&&(m.y=te,E.y=E.y-(N.y-te))}const Z=sd({width:m.width,prevWidth:H,height:m.height,prevHeight:y,affectsX:s.controlDirection.affectsX,affectsY:s.controlDirection.affectsY}),U={...m,direction:Z};(w==null?void 0:w(k,U))!==!1&&(z=!0,h==null||h(k,U),r(N,P))}).on("end",k=>{z&&(x==null||x(k,{...m}),o==null||o({...m}),z=!1)});i.call(j)}function u(){i.on(".drag",null)}return{update:a,destroy:u}}var Cn={exports:{}},Mn={},An={exports:{}},In={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var io;function dd(){if(io)return In;io=1;var e=Jt();function t(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function a(l,d){var p=d(),h=r({inst:{value:p,getSnapshot:d}}),x=h[0].inst,w=h[1];return i(function(){x.value=p,x.getSnapshot=d,u(x)&&w({inst:x})},[l,p,d]),o(function(){return u(x)&&w({inst:x}),l(function(){u(x)&&w({inst:x})})},[l]),s(p),p}function u(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!n(l,p)}catch{return!0}}function c(l,d){return d()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return In.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,In}var so;function hd(){return so||(so=1,An.exports=dd()),An.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ao;function gd(){if(ao)return Mn;ao=1;var e=Jt(),t=hd();function n(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,i=e.useRef,s=e.useEffect,a=e.useMemo,u=e.useDebugValue;return Mn.useSyncExternalStoreWithSelector=function(c,f,l,d,p){var h=i(null);if(h.current===null){var x={hasValue:!1,value:null};h.current=x}else x=h.current;h=a(function(){function m(S){if(!E){if(E=!0,g=S,S=d(S),p!==void 0&&x.hasValue){var b=x.value;if(p(b,S))return v=b}return v=S}if(b=v,r(g,S))return b;var D=d(S);return p!==void 0&&p(b,D)?(g=S,b):(g=S,v=D)}var E=!1,g,v,M=l===void 0?null:l;return[function(){return m(f())},M===null?void 0:function(){return m(M())}]},[f,l,d,p]);var w=o(c,h[0],h[1]);return s(function(){x.hasValue=!0,x.value=w},[w]),u(w),w},Mn}var co;function pd(){return co||(co=1,Cn.exports=gd()),Cn.exports}var md=pd();const yd=qn(md),xd={},uo=e=>{let t;const n=new Set,r=(f,l)=>{const d=typeof f=="function"?f(t):f;if(!Object.is(d,t)){const p=t;t=l??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(h=>h(t,p))}},o=()=>t,u={setState:r,getState:o,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(xd?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,o,u);return u},wd=e=>e?uo(e):uo,{useDebugValue:vd}=zo,{useSyncExternalStoreWithSelector:_d}=yd,Ed=e=>e;function ji(e,t=Ed,n){const r=_d(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return vd(r),r}const lo=(e,t)=>{const n=wd(e),r=(o,i=t)=>ji(n,o,i);return Object.assign(r,n),r},bd=(e,t)=>e?lo(e,t):lo;function re(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const un=L.createContext(null),Sd=un.Provider,Fi=we.error001();function J(e,t){const n=L.useContext(un);if(n===null)throw new Error(Fi);return ji(n,e,t)}function ie(){const e=L.useContext(un);if(e===null)throw new Error(Fi);return L.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const fo={display:"none"},Nd={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Yi="react-flow__node-desc",Xi="react-flow__edge-desc",Cd="react-flow__aria-live",Md=e=>e.ariaLiveMessage,Ad=e=>e.ariaLabelConfig;function Id({rfId:e}){const t=J(Md);return R.jsx("div",{id:`${Cd}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Nd,children:t})}function kd({rfId:e,disableKeyboardA11y:t}){const n=J(Ad);return R.jsxs(R.Fragment,{children:[R.jsx("div",{id:`${Yi}-${e}`,style:fo,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),R.jsx("div",{id:`${Xi}-${e}`,style:fo,children:n["edge.a11yDescription.default"]}),!t&&R.jsx(Id,{rfId:e})]})}const ln=L.forwardRef(({position:e="top-left",children:t,className:n,style:r,...o},i)=>{const s=`${e}`.split("-");return R.jsx("div",{className:se(["react-flow__panel",n,...s]),style:r,ref:i,...o,children:t})});ln.displayName="Panel";function Td({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:R.jsx(ln,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:R.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const $d=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Rt=e=>e.id;function Pd(e,t){return re(e.selectedNodes.map(Rt),t.selectedNodes.map(Rt))&&re(e.selectedEdges.map(Rt),t.selectedEdges.map(Rt))}function Rd({onSelectionChange:e}){const t=ie(),{selectedNodes:n,selectedEdges:r}=J($d,Pd);return L.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(i=>i(o))},[n,r,e]),null}const zd=e=>!!e.onSelectionChangeHandlers;function Dd({onSelectionChange:e}){const t=J(zd);return e||t?R.jsx(Rd,{onSelectionChange:e}):null}const qi=[0,0],Ld={x:0,y:0,zoom:1},Hd=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],ho=[...Hd,"rfId"],Od=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),go={translateExtent:pt,nodeOrigin:qi,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function Vd(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:u}=J(Od,re),c=ie();L.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{f.current=go,a()}),[]);const f=L.useRef(go);return L.useEffect(()=>{for(const l of ho){const d=e[l],p=f.current[l];d!==p&&(typeof e[l]>"u"||(l==="nodes"?t(d):l==="edges"?n(d):l==="minZoom"?r(d):l==="maxZoom"?o(d):l==="translateExtent"?i(d):l==="nodeExtent"?s(d):l==="ariaLabelConfig"?c.setState({ariaLabelConfig:_f(d)}):l==="fitView"?c.setState({fitViewQueued:d}):l==="fitViewOptions"?c.setState({fitViewOptions:d}):c.setState({[l]:d})))}f.current=e},ho.map(l=>e[l])),null}function po(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Bd(e){var r;const[t,n]=L.useState(e==="system"?null:e);return L.useEffect(()=>{if(e!=="system"){n(e);return}const o=po(),i=()=>n(o!=null&&o.matches?"dark":"light");return i(),o==null||o.addEventListener("change",i),()=>{o==null||o.removeEventListener("change",i)}},[e]),t!==null?t:(r=po())!=null&&r.matches?"dark":"light"}const mo=typeof document<"u"?document:null;function wt(e=null,t={target:mo,actInsideInputWithModifier:!0}){const[n,r]=L.useState(!1),o=L.useRef(!1),i=L.useRef(new Set([])),[s,a]=L.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(l=>typeof l=="string").map(l=>l.replace("+",`
`).replace(`

`,`
+`).split(`
`)),f=c.reduce((l,d)=>l.concat(...d),[]);return[c,f]}return[[],[]]},[e]);return L.useEffect(()=>{const u=(t==null?void 0:t.target)??mo,c=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const f=p=>{var w,m;if(o.current=p.ctrlKey||p.metaKey||p.shiftKey||p.altKey,(!o.current||o.current&&!c)&&Si(p))return!1;const x=xo(p.code,a);if(i.current.add(p[x]),yo(s,i.current,!1)){const E=((m=(w=p.composedPath)==null?void 0:w.call(p))==null?void 0:m[0])||p.target,g=(E==null?void 0:E.nodeName)==="BUTTON"||(E==null?void 0:E.nodeName)==="A";t.preventDefault!==!1&&(o.current||!g)&&p.preventDefault(),r(!0)}},l=p=>{const h=xo(p.code,a);yo(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(p[h]),p.key==="Meta"&&i.current.clear(),o.current=!1},d=()=>{i.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",f),u==null||u.addEventListener("keyup",l),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{u==null||u.removeEventListener("keydown",f),u==null||u.removeEventListener("keyup",l),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function yo(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function xo(e,t){return t.includes(e)?"code":"key"}const jd=()=>{const e=ie();return L.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:i,maxZoom:s,panZoom:a}=e.getState(),u=rr(t,r,o,i,s,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(u,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:o,snapToGrid:i,domNode:s}=e.getState();if(!s)return t;const{x:a,y:u}=s.getBoundingClientRect(),c={x:t.x-a,y:t.y-u},f=n.snapGrid??o,l=n.snapToGrid??i;return St(c,r,l,f)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),s=Zt(t,n);return{x:s.x+o,y:s.y+i}}}),[])};function Wi(e,t){const n=[],r=new Map,o=[];for(const i of e)if(i.type==="add"){o.push(i);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const s=r.get(i.id);s?s.push(i):r.set(i.id,[i])}for(const i of t){const s=r.get(i.id);if(!s){n.push(i);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const a={...i};for(const u of s)Fd(u,a);n.push(a)}return o.length&&o.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function Fd(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Gi(e,t){return Wi(e,t)}function Ui(e,t){return Wi(e,t)}function $e(e,t){return{id:e,type:"select",selected:t}}function Ye(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const s=t.has(o);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),r.push($e(i.id,s)))}return r}function wo({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const a=t.get(s.id),u=((o=a==null?void 0:a.internals)==null?void 0:o.userNode)??a;u!==void 0&&u!==s&&n.push({id:s.id,item:s,type:"replace"}),u===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function vo(e){return{id:e.id,type:"remove"}}const _o=e=>ff(e),Yd=e=>mi(e);function Zi(e){return L.forwardRef(e)}const Xd=typeof window<"u"?L.useLayoutEffect:L.useEffect;function Eo(e){const[t,n]=L.useState(BigInt(0)),[r]=L.useState(()=>qd(()=>n(o=>o+BigInt(1))));return Xd(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function qd(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Ki=L.createContext(null);function Wd({children:e}){const t=ie(),n=L.useCallback(a=>{const{nodes:u=[],setNodes:c,hasDefaultNodes:f,onNodesChange:l,nodeLookup:d,fitViewQueued:p,onNodesChangeMiddlewareMap:h}=t.getState();let x=u;for(const m of a)x=typeof m=="function"?m(x):m;let w=wo({items:x,lookup:d});for(const m of h.values())w=m(w);f&&c(x),w.length>0?l==null||l(w):p&&window.requestAnimationFrame(()=>{const{fitViewQueued:m,nodes:E,setNodes:g}=t.getState();m&&g(E)})},[]),r=Eo(n),o=L.useCallback(a=>{const{edges:u=[],setEdges:c,hasDefaultEdges:f,onEdgesChange:l,edgeLookup:d}=t.getState();let p=u;for(const h of a)p=typeof h=="function"?h(p):h;f?c(p):l&&l(wo({items:p,lookup:d}))},[]),i=Eo(o),s=L.useMemo(()=>({nodeQueue:r,edgeQueue:i}),[]);return R.jsx(Ki.Provider,{value:s,children:e})}function Gd(){const e=L.useContext(Ki);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Ud=e=>!!e.panZoom;function lr(){const e=jd(),t=ie(),n=Gd(),r=J(Ud),o=L.useMemo(()=>{const i=l=>t.getState().nodeLookup.get(l),s=l=>{n.nodeQueue.push(l)},a=l=>{n.edgeQueue.push(l)},u=l=>{var m,E;const{nodeLookup:d,nodeOrigin:p}=t.getState(),h=_o(l)?l:d.get(l.id),x=h.parentId?Ei(h.position,h.measured,h.parentId,d,p):h.position,w={...h,position:x,width:((m=h.measured)==null?void 0:m.width)??h.width,height:((E=h.measured)==null?void 0:E.height)??h.height};return Ke(w)},c=(l,d,p={replace:!1})=>{s(h=>h.map(x=>{if(x.id===l){const w=typeof d=="function"?d(x):d;return p.replace&&_o(w)?w:{...x,...w}}return x}))},f=(l,d,p={replace:!1})=>{a(h=>h.map(x=>{if(x.id===l){const w=typeof d=="function"?d(x):d;return p.replace&&Yd(w)?w:{...x,...w}}return x}))};return{getNodes:()=>t.getState().nodes.map(l=>({...l})),getNode:l=>{var d;return(d=i(l))==null?void 0:d.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:l=[]}=t.getState();return l.map(d=>({...d}))},getEdge:l=>t.getState().edgeLookup.get(l),setNodes:s,setEdges:a,addNodes:l=>{const d=Array.isArray(l)?l:[l];n.nodeQueue.push(p=>[...p,...d])},addEdges:l=>{const d=Array.isArray(l)?l:[l];n.edgeQueue.push(p=>[...p,...d])},toObject:()=>{const{nodes:l=[],edges:d=[],transform:p}=t.getState(),[h,x,w]=p;return{nodes:l.map(m=>({...m})),edges:d.map(m=>({...m})),viewport:{x:h,y:x,zoom:w}}},deleteElements:async({nodes:l=[],edges:d=[]})=>{const{nodes:p,edges:h,onNodesDelete:x,onEdgesDelete:w,triggerNodeChanges:m,triggerEdgeChanges:E,onDelete:g,onBeforeDelete:v}=t.getState(),{nodes:M,edges:S}=await mf({nodesToRemove:l,edgesToRemove:d,nodes:p,edges:h,onBeforeDelete:v}),b=S.length>0,D=M.length>0;if(b){const z=S.map(vo);w==null||w(S),E(z)}if(D){const z=M.map(vo);x==null||x(M),m(z)}return(D||b)&&(g==null||g({nodes:M,edges:S})),{deletedNodes:M,deletedEdges:S}},getIntersectingNodes:(l,d=!0,p)=>{const h=qr(l),x=h?l:u(l),w=p!==void 0;return x?(p||t.getState().nodes).filter(m=>{const E=t.getState().nodeLookup.get(m.id);if(E&&!h&&(m.id===l.id||!E.internals.positionAbsolute))return!1;const g=Ke(w?m:E),v=yt(g,x);return d&&v>0||v>=g.width*g.height||v>=x.width*x.height}):[]},isNodeIntersecting:(l,d,p=!0)=>{const x=qr(l)?l:u(l);if(!x)return!1;const w=yt(x,d);return p&&w>0||w>=d.width*d.height||w>=x.width*x.height},updateNode:c,updateNodeData:(l,d,p={replace:!1})=>{c(l,h=>{const x=typeof d=="function"?d(h):d;return p.replace?{...h,data:x}:{...h,data:{...h.data,...x}}},p)},updateEdge:f,updateEdgeData:(l,d,p={replace:!1})=>{f(l,h=>{const x=typeof d=="function"?d(h):d;return p.replace?{...h,data:x}:{...h,data:{...h.data,...x}}},p)},getNodesBounds:l=>{const{nodeLookup:d,nodeOrigin:p}=t.getState();return df(l,{nodeLookup:d,nodeOrigin:p})},getHandleConnections:({type:l,id:d,nodeId:p})=>{var h;return Array.from(((h=t.getState().connectionLookup.get(`${p}-${l}${d?`-${d}`:""}`))==null?void 0:h.values())??[])},getNodeConnections:({type:l,handleId:d,nodeId:p})=>{var h;return Array.from(((h=t.getState().connectionLookup.get(`${p}${l?d?`-${l}-${d}`:`-${l}`:""}`))==null?void 0:h.values())??[])},fitView:async l=>{const d=t.getState().fitViewResolver??vf();return t.setState({fitViewQueued:!0,fitViewOptions:l,fitViewResolver:d}),n.nodeQueue.push(p=>[...p]),d.promise}}},[]);return L.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const bo=e=>e.selected,Zd=typeof window<"u"?window:void 0;function Kd({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ie(),{deleteElements:r}=lr(),o=wt(e,{actInsideInputWithModifier:!1}),i=wt(t,{target:Zd});L.useEffect(()=>{if(o){const{edges:s,nodes:a}=n.getState();r({nodes:a.filter(bo),edges:s.filter(bo)}),n.setState({nodesSelectionActive:!1})}},[o]),L.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function Qd(e){const t=ie();L.useEffect(()=>{const n=()=>{var o,i,s,a;if(!e.current||!(((i=(o=e.current).checkVisibility)==null?void 0:i.call(o))??!0))return!1;const r=or(e.current);(r.height===0||r.width===0)&&((a=(s=t.getState()).onError)==null||a.call(s,"004",we.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const fn={position:"absolute",width:"100%",height:"100%",top:0,left:0},Jd=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function eh({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=ze.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:u,translateExtent:c,minZoom:f,maxZoom:l,zoomActivationKeyCode:d,preventScrolling:p=!0,children:h,noWheelClassName:x,noPanClassName:w,onViewportChange:m,isControlledViewport:E,paneClickDistance:g,selectionOnDrag:v}){const M=ie(),S=L.useRef(null),{userSelectionActive:b,lib:D,connectionInProgress:z}=J(Jd,re),j=wt(d),k=L.useRef();Qd(S);const $=L.useCallback(B=>{m==null||m({x:B[0],y:B[1],zoom:B[2]}),E||M.setState({transform:B})},[m,E]);return L.useEffect(()=>{if(S.current){k.current=rd({domNode:S.current,minZoom:f,maxZoom:l,translateExtent:c,viewport:u,onDraggingChange:C=>M.setState({paneDragging:C}),onPanZoomStart:(C,P)=>{const{onViewportChangeStart:I,onMoveStart:A}=M.getState();A==null||A(C,P),I==null||I(P)},onPanZoom:(C,P)=>{const{onViewportChange:I,onMove:A}=M.getState();A==null||A(C,P),I==null||I(P)},onPanZoomEnd:(C,P)=>{const{onViewportChangeEnd:I,onMoveEnd:A}=M.getState();A==null||A(C,P),I==null||I(P)}});const{x:B,y:_,zoom:T}=k.current.getViewport();return M.setState({panZoom:k.current,transform:[B,_,T],domNode:S.current.closest(".react-flow")}),()=>{var C;(C=k.current)==null||C.destroy()}}},[]),L.useEffect(()=>{var B;(B=k.current)==null||B.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:j,preventScrolling:p,noPanClassName:w,userSelectionActive:b,noWheelClassName:x,lib:D,onTransformChange:$,connectionInProgress:z,selectionOnDrag:v,paneClickDistance:g})},[e,t,n,r,o,i,s,a,j,p,w,b,x,D,$,z,v,g]),R.jsx("div",{className:"react-flow__renderer",ref:S,style:fn,children:h})}const th=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function nh(){const{userSelectionActive:e,userSelectionRect:t}=J(th,re);return e&&t?R.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const kn=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},rh=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function oh({isSelecting:e,selectionKeyPressed:t,selectionMode:n=mt.Full,panOnDrag:r,paneClickDistance:o,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:a,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:f,onPaneMouseEnter:l,onPaneMouseMove:d,onPaneMouseLeave:p,children:h}){const x=ie(),{userSelectionActive:w,elementsSelectable:m,dragging:E,connectionInProgress:g}=J(rh,re),v=m&&(e||w),M=L.useRef(null),S=L.useRef(),b=L.useRef(new Set),D=L.useRef(new Set),z=L.useRef(!1),j=I=>{if(z.current||g){z.current=!1;return}u==null||u(I),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},k=I=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){I.preventDefault();return}c==null||c(I)},$=f?I=>f(I):void 0,B=I=>{z.current&&(I.stopPropagation(),z.current=!1)},_=I=>{var Y,X;const{domNode:A}=x.getState();if(S.current=A==null?void 0:A.getBoundingClientRect(),!S.current)return;const H=I.target===M.current;if(!H&&!!I.target.closest(".nokey")||!e||!(i&&H||t)||I.button!==0||!I.isPrimary)return;(X=(Y=I.target)==null?void 0:Y.setPointerCapture)==null||X.call(Y,I.pointerId),z.current=!1;const{x:V,y:O}=pe(I.nativeEvent,S.current);x.setState({userSelectionRect:{width:0,height:0,startX:V,startY:O,x:V,y:O}}),H||(I.stopPropagation(),I.preventDefault())},T=I=>{const{userSelectionRect:A,transform:H,nodeLookup:y,edgeLookup:N,connectionLookup:V,triggerNodeChanges:O,triggerEdgeChanges:Y,defaultEdgeOptions:X,resetSelectedElements:q}=x.getState();if(!S.current||!A)return;const{x:F,y:W}=pe(I.nativeEvent,S.current),{startX:ee,startY:Q}=A;if(!z.current){const te=t?0:o;if(Math.hypot(F-ee,W-Q)<=te)return;q(),s==null||s(I)}z.current=!0;const Z={startX:ee,startY:Q,x:F<ee?F:ee,y:W<Q?W:Q,width:Math.abs(F-ee),height:Math.abs(W-Q)},U=b.current,ne=D.current;b.current=new Set(nr(y,Z,H,n===mt.Partial,!0).map(te=>te.id)),D.current=new Set;const oe=(X==null?void 0:X.selectable)??!0;for(const te of b.current){const ae=V.get(te);if(ae)for(const{edgeId:Ce}of ae.values()){const _e=N.get(Ce);_e&&(_e.selectable??oe)&&D.current.add(Ce)}}if(!Wr(U,b.current)){const te=Ye(y,b.current,!0);O(te)}if(!Wr(ne,D.current)){const te=Ye(N,D.current);Y(te)}x.setState({userSelectionRect:Z,userSelectionActive:!0,nodesSelectionActive:!1})},C=I=>{var A,H;I.button===0&&((H=(A=I.target)==null?void 0:A.releasePointerCapture)==null||H.call(A,I.pointerId),!w&&I.target===M.current&&x.getState().userSelectionRect&&(j==null||j(I)),x.setState({userSelectionActive:!1,userSelectionRect:null}),z.current&&(a==null||a(I),x.setState({nodesSelectionActive:b.current.size>0})))},P=r===!0||Array.isArray(r)&&r.includes(0);return R.jsxs("div",{className:se(["react-flow__pane",{draggable:P,dragging:E,selection:e}]),onClick:v?void 0:kn(j,M),onContextMenu:kn(k,M),onWheel:kn($,M),onPointerEnter:v?void 0:l,onPointerMove:v?T:d,onPointerUp:v?C:void 0,onPointerDownCapture:v?_:void 0,onClickCapture:v?B:void 0,onPointerLeave:p,ref:M,style:fn,children:[h,R.jsx(nh,{})]})}function Xn({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:a,onError:u}=t.getState(),c=a.get(e);if(!c){u==null||u("012",we.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(i({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var f;return(f=r==null?void 0:r.current)==null?void 0:f.blur()})):o([e])}function Qi({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:s}){const a=ie(),[u,c]=L.useState(!1),f=L.useRef();return L.useEffect(()=>{f.current=Ff({getStoreItems:()=>a.getState(),onNodeMouseDown:l=>{Xn({id:l,store:a,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),L.useEffect(()=>{var l,d;if(t)(l=f.current)==null||l.destroy();else if(e.current)return(d=f.current)==null||d.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:o,nodeClickDistance:s}),()=>{var p;(p=f.current)==null||p.destroy()}},[n,r,t,i,e,o]),u}const ih=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Ji(){const e=ie();return L.useCallback(n=>{const{nodeExtent:r,snapToGrid:o,snapGrid:i,nodesDraggable:s,onError:a,updateNodePositions:u,nodeLookup:c,nodeOrigin:f}=e.getState(),l=new Map,d=ih(s),p=o?i[0]:5,h=o?i[1]:5,x=n.direction.x*p*n.factor,w=n.direction.y*h*n.factor;for(const[,m]of c){if(!d(m))continue;let E={x:m.internals.positionAbsolute.x+x,y:m.internals.positionAbsolute.y+w};o&&(E=bt(E,i));const{position:g,positionAbsolute:v}=yi({nodeId:m.id,nextPosition:E,nodeLookup:c,nodeExtent:r,nodeOrigin:f,onError:a});m.position=g,m.internals.positionAbsolute=v,l.set(m.id,m)}u(l)},[])}const fr=L.createContext(null),sh=fr.Provider;fr.Consumer;const dr=()=>L.useContext(fr),ah=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),ch=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:s}=r,{fromHandle:a,toHandle:u,isValid:c}=s,f=(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.id)===t&&(u==null?void 0:u.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:f,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:i===Ue.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!o,valid:f&&c}};function uh({type:e="source",position:t=G.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:u,className:c,onMouseDown:f,onTouchStart:l,...d},p){var T,C;const h=s||null,x=e==="target",w=ie(),m=dr(),{connectOnClick:E,noPanClassName:g,rfId:v}=J(ah,re),{connectingFrom:M,connectingTo:S,clickConnecting:b,isPossibleEndHandle:D,connectionInProcess:z,clickConnectionInProcess:j,valid:k}=J(ch(m,h,e),re);m||(C=(T=w.getState()).onError)==null||C.call(T,"010",we.error010());const $=P=>{const{defaultEdgeOptions:I,onConnect:A,hasDefaultEdges:H}=w.getState(),y={...I,...P};if(H){const{edges:N,setEdges:V}=w.getState();V(Cf(y,N))}A==null||A(y),a==null||a(y)},B=P=>{if(!m)return;const I=Ni(P.nativeEvent);if(o&&(I&&P.button===0||!I)){const A=w.getState();Yn.onPointerDown(P.nativeEvent,{handleDomNode:P.currentTarget,autoPanOnConnect:A.autoPanOnConnect,connectionMode:A.connectionMode,connectionRadius:A.connectionRadius,domNode:A.domNode,nodeLookup:A.nodeLookup,lib:A.lib,isTarget:x,handleId:h,nodeId:m,flowId:A.rfId,panBy:A.panBy,cancelConnection:A.cancelConnection,onConnectStart:A.onConnectStart,onConnectEnd:A.onConnectEnd,updateConnection:A.updateConnection,onConnect:$,isValidConnection:n||A.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:A.autoPanSpeed,dragThreshold:A.connectionDragThreshold})}I?f==null||f(P):l==null||l(P)},_=P=>{const{onClickConnectStart:I,onClickConnectEnd:A,connectionClickStartHandle:H,connectionMode:y,isValidConnection:N,lib:V,rfId:O,nodeLookup:Y,connection:X}=w.getState();if(!m||!H&&!o)return;if(!H){I==null||I(P.nativeEvent,{nodeId:m,handleId:h,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:m,type:e,id:h}});return}const q=bi(P.target),F=n||N,{connection:W,isValid:ee}=Yn.isValid(P.nativeEvent,{handle:{nodeId:m,id:h,type:e},connectionMode:y,fromNodeId:H.nodeId,fromHandleId:H.id||null,fromType:H.type,isValidConnection:F,flowId:O,doc:q,lib:V,nodeLookup:Y});ee&&W&&$(W);const Q=structuredClone(X);delete Q.inProgress,Q.toPosition=Q.toHandle?Q.toHandle.position:null,A==null||A(P,Q),w.setState({connectionClickStartHandle:null})};return R.jsx("div",{"data-handleid":h,"data-nodeid":m,"data-handlepos":t,"data-id":`${v}-${m}-${h}-${e}`,className:se(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",g,c,{source:!x,target:x,connectable:r,connectablestart:o,connectableend:i,clickconnecting:b,connectingfrom:M,connectingto:S,valid:k,connectionindicator:r&&(!z||D)&&(z||j?i:o)}]),onMouseDown:B,onTouchStart:B,onClick:E?_:void 0,ref:p,...d,children:u})}const Kt=L.memo(Zi(uh));function lh({data:e,isConnectable:t,sourcePosition:n=G.Bottom}){return R.jsxs(R.Fragment,{children:[e==null?void 0:e.label,R.jsx(Kt,{type:"source",position:n,isConnectable:t})]})}function fh({data:e,isConnectable:t,targetPosition:n=G.Top,sourcePosition:r=G.Bottom}){return R.jsxs(R.Fragment,{children:[R.jsx(Kt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,R.jsx(Kt,{type:"source",position:r,isConnectable:t})]})}function dh(){return null}function hh({data:e,isConnectable:t,targetPosition:n=G.Top}){return R.jsxs(R.Fragment,{children:[R.jsx(Kt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Qt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},So={input:lh,default:fh,output:hh,group:dh};function gh(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const ph=e=>{const{width:t,height:n,x:r,y:o}=Je(e.nodeLookup,{filter:i=>!!i.selected});return{width:ge(t)?t:null,height:ge(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function mh({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ie(),{width:o,height:i,transformString:s,userSelectionActive:a}=J(ph,re),u=Ji(),c=L.useRef(null);if(L.useEffect(()=>{var d;n||(d=c.current)==null||d.focus({preventScroll:!0})},[n]),Qi({nodeRef:c}),a||!o||!i)return null;const f=e?d=>{const p=r.getState().nodes.filter(h=>h.selected);e(d,p)}:void 0,l=d=>{Object.prototype.hasOwnProperty.call(Qt,d.key)&&(d.preventDefault(),u({direction:Qt[d.key],factor:d.shiftKey?4:1}))};return R.jsx("div",{className:se(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:R.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:l,style:{width:o,height:i}})})}const No=typeof window<"u"?window:void 0,yh=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function es({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:u,selectionKeyCode:c,selectionOnDrag:f,selectionMode:l,onSelectionStart:d,onSelectionEnd:p,multiSelectionKeyCode:h,panActivationKeyCode:x,zoomActivationKeyCode:w,elementsSelectable:m,zoomOnScroll:E,zoomOnPinch:g,panOnScroll:v,panOnScrollSpeed:M,panOnScrollMode:S,zoomOnDoubleClick:b,panOnDrag:D,defaultViewport:z,translateExtent:j,minZoom:k,maxZoom:$,preventScrolling:B,onSelectionContextMenu:_,noWheelClassName:T,noPanClassName:C,disableKeyboardA11y:P,onViewportChange:I,isControlledViewport:A}){const{nodesSelectionActive:H,userSelectionActive:y}=J(yh,re),N=wt(c,{target:No}),V=wt(x,{target:No}),O=V||D,Y=V||v,X=f&&O!==!0,q=N||y||X;return Kd({deleteKeyCode:u,multiSelectionKeyCode:h}),R.jsx(eh,{onPaneContextMenu:i,elementsSelectable:m,zoomOnScroll:E,zoomOnPinch:g,panOnScroll:Y,panOnScrollSpeed:M,panOnScrollMode:S,zoomOnDoubleClick:b,panOnDrag:!N&&O,defaultViewport:z,translateExtent:j,minZoom:k,maxZoom:$,zoomActivationKeyCode:w,preventScrolling:B,noWheelClassName:T,noPanClassName:C,onViewportChange:I,isControlledViewport:A,paneClickDistance:a,selectionOnDrag:X,children:R.jsxs(oh,{onSelectionStart:d,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:O,isSelecting:!!q,selectionMode:l,selectionKeyPressed:N,paneClickDistance:a,selectionOnDrag:X,children:[e,H&&R.jsx(mh,{onSelectionContextMenu:_,noPanClassName:C,disableKeyboardA11y:P})]})})}es.displayName="FlowRenderer";const xh=L.memo(es),wh=e=>t=>e?nr(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function vh(e){return J(L.useCallback(wh(e),[e]),re)}const _h=e=>e.updateNodeInternals;function Eh(){const e=J(_h),[t]=L.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const i=o.target.getAttribute("data-id");r.set(i,{id:i,nodeElement:o.target,force:!0})}),e(r)}));return L.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function bh({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=ie(),i=L.useRef(null),s=L.useRef(null),a=L.useRef(e.sourcePosition),u=L.useRef(e.targetPosition),c=L.useRef(t),f=n&&!!e.internals.handleBounds;return L.useEffect(()=>{i.current&&!e.hidden&&(!f||s.current!==i.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(i.current),s.current=i.current)},[f,e.hidden]),L.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),L.useEffect(()=>{if(i.current){const l=c.current!==t,d=a.current!==e.sourcePosition,p=u.current!==e.targetPosition;(l||d||p)&&(c.current=t,a.current=e.sourcePosition,u.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function Sh({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:s,nodesDraggable:a,elementsSelectable:u,nodesConnectable:c,nodesFocusable:f,resizeObserver:l,noDragClassName:d,noPanClassName:p,disableKeyboardA11y:h,rfId:x,nodeTypes:w,nodeClickDistance:m,onError:E}){const{node:g,internals:v,isParent:M}=J(F=>{const W=F.nodeLookup.get(e),ee=F.parentLookup.has(e);return{node:W,internals:W.internals,isParent:ee}},re);let S=g.type||"default",b=(w==null?void 0:w[S])||So[S];b===void 0&&(E==null||E("003",we.error003(S)),S="default",b=(w==null?void 0:w.default)||So.default);const D=!!(g.draggable||a&&typeof g.draggable>"u"),z=!!(g.selectable||u&&typeof g.selectable>"u"),j=!!(g.connectable||c&&typeof g.connectable>"u"),k=!!(g.focusable||f&&typeof g.focusable>"u"),$=ie(),B=_i(g),_=bh({node:g,nodeType:S,hasDimensions:B,resizeObserver:l}),T=Qi({nodeRef:_,disabled:g.hidden||!D,noDragClassName:d,handleSelector:g.dragHandle,nodeId:e,isSelectable:z,nodeClickDistance:m}),C=Ji();if(g.hidden)return null;const P=Ne(g),I=gh(g),A=z||D||t||n||r||o,H=n?F=>n(F,{...v.userNode}):void 0,y=r?F=>r(F,{...v.userNode}):void 0,N=o?F=>o(F,{...v.userNode}):void 0,V=i?F=>i(F,{...v.userNode}):void 0,O=s?F=>s(F,{...v.userNode}):void 0,Y=F=>{const{selectNodesOnDrag:W,nodeDragThreshold:ee}=$.getState();z&&(!W||!D||ee>0)&&Xn({id:e,store:$,nodeRef:_}),t&&t(F,{...v.userNode})},X=F=>{if(!(Si(F.nativeEvent)||h)){if(di.includes(F.key)&&z){const W=F.key==="Escape";Xn({id:e,store:$,unselect:W,nodeRef:_})}else if(D&&g.selected&&Object.prototype.hasOwnProperty.call(Qt,F.key)){F.preventDefault();const{ariaLabelConfig:W}=$.getState();$.setState({ariaLiveMessage:W["node.a11yDescription.ariaLiveMessage"]({direction:F.key.replace("Arrow","").toLowerCase(),x:~~v.positionAbsolute.x,y:~~v.positionAbsolute.y})}),C({direction:Qt[F.key],factor:F.shiftKey?4:1})}}},q=()=>{var ne;if(h||!((ne=_.current)!=null&&ne.matches(":focus-visible")))return;const{transform:F,width:W,height:ee,autoPanOnNodeFocus:Q,setCenter:Z}=$.getState();if(!Q)return;nr(new Map([[e,g]]),{x:0,y:0,width:W,height:ee},F,!0).length>0||Z(g.position.x+P.width/2,g.position.y+P.height/2,{zoom:F[2]})};return R.jsx("div",{className:se(["react-flow__node",`react-flow__node-${S}`,{[p]:D},g.className,{selected:g.selected,selectable:z,parent:M,draggable:D,dragging:T}]),ref:_,style:{zIndex:v.z,transform:`translate(${v.positionAbsolute.x}px,${v.positionAbsolute.y}px)`,pointerEvents:A?"all":"none",visibility:B?"visible":"hidden",...g.style,...I},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:H,onMouseMove:y,onMouseLeave:N,onContextMenu:V,onClick:Y,onDoubleClick:O,onKeyDown:k?X:void 0,tabIndex:k?0:void 0,onFocus:k?q:void 0,role:g.ariaRole??(k?"group":void 0),"aria-roledescription":"node","aria-describedby":h?void 0:`${Yi}-${x}`,"aria-label":g.ariaLabel,...g.domAttributes,children:R.jsx(sh,{value:e,children:R.jsx(b,{id:e,data:g.data,type:S,positionAbsoluteX:v.positionAbsolute.x,positionAbsoluteY:v.positionAbsolute.y,selected:g.selected??!1,selectable:z,draggable:D,deletable:g.deletable??!0,isConnectable:j,sourcePosition:g.sourcePosition,targetPosition:g.targetPosition,dragging:T,dragHandle:g.dragHandle,zIndex:v.z,parentId:g.parentId,...P})})})}var Nh=L.memo(Sh);const Ch=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function ts(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:i}=J(Ch,re),s=vh(e.onlyRenderVisibleElements),a=Eh();return R.jsx("div",{className:"react-flow__nodes",style:fn,children:s.map(u=>R.jsx(Nh,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:i},u))})}ts.displayName="NodeRenderer";const Mh=L.memo(ts);function Ah(e){return J(L.useCallback(n=>{if(!e)return n.edges.map(o=>o.id);const r=[];if(n.width&&n.height)for(const o of n.edges){const i=n.nodeLookup.get(o.source),s=n.nodeLookup.get(o.target);i&&s&&Sf({sourceNode:i,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(o.id)}return r},[e]),re)}const Ih=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return R.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},kh=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return R.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Co={[Gt.Arrow]:Ih,[Gt.ArrowClosed]:kh};function Th(e){const t=ie();return L.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(Co,e)?Co[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",we.error009(e)),null)},[e])}const $h=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const u=Th(t);return u?R.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0",children:R.jsx(u,{color:n,strokeWidth:s})}):null},ns=({defaultColor:e,rfId:t})=>{const n=J(i=>i.edges),r=J(i=>i.defaultEdgeOptions),o=L.useMemo(()=>Tf(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?R.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:R.jsx("defs",{children:o.map(i=>R.jsx($h,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};ns.displayName="MarkerDefinitions";var Ph=L.memo(ns);function rs({x:e,y:t,label:n,labelStyle:r,labelShowBg:o=!0,labelBgStyle:i,labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:u,className:c,...f}){const[l,d]=L.useState({x:1,y:0,width:0,height:0}),p=se(["react-flow__edge-textwrapper",c]),h=L.useRef(null);return L.useEffect(()=>{if(h.current){const x=h.current.getBBox();d({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),n?R.jsxs("g",{transform:`translate(${e-l.width/2} ${t-l.height/2})`,className:p,visibility:l.width?"visible":"hidden",...f,children:[o&&R.jsx("rect",{width:l.width+2*s[0],x:-s[0],y:-s[1],height:l.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),R.jsx("text",{className:"react-flow__edge-text",y:l.height/2,dy:"0.3em",ref:h,style:r,children:n}),u]}):null}rs.displayName="EdgeText";const Rh=L.memo(rs);function dn({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:u,interactionWidth:c=20,...f}){return R.jsxs(R.Fragment,{children:[R.jsx("path",{...f,d:e,fill:"none",className:se(["react-flow__edge-path",f.className])}),c?R.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:c,className:"react-flow__edge-interaction"}):null,r&&ge(t)&&ge(n)?R.jsx(Rh,{x:t,y:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:u}):null]})}function Mo({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===G.Left||e===G.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function os({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:o,targetPosition:i=G.Top}){const[s,a]=Mo({pos:n,x1:e,y1:t,x2:r,y2:o}),[u,c]=Mo({pos:i,x1:r,y1:o,x2:e,y2:t}),[f,l,d,p]=Ci({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${e},${t} C${s},${a} ${u},${c} ${r},${o}`,f,l,d,p]}function is(e){return L.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s,targetPosition:a,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:x,markerStart:w,interactionWidth:m})=>{const[E,g,v]=os({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:a}),M=e.isInternal?void 0:t;return R.jsx(dn,{id:M,path:E,labelX:g,labelY:v,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:x,markerStart:w,interactionWidth:m})})}const zh=is({isInternal:!1}),ss=is({isInternal:!0});zh.displayName="SimpleBezierEdge";ss.displayName="SimpleBezierEdgeInternal";function as(e){return L.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:l,style:d,sourcePosition:p=G.Bottom,targetPosition:h=G.Top,markerEnd:x,markerStart:w,pathOptions:m,interactionWidth:E})=>{const[g,v,M]=Bn({sourceX:n,sourceY:r,sourcePosition:p,targetX:o,targetY:i,targetPosition:h,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset,stepPosition:m==null?void 0:m.stepPosition}),S=e.isInternal?void 0:t;return R.jsx(dn,{id:S,path:g,labelX:v,labelY:M,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:l,style:d,markerEnd:x,markerStart:w,interactionWidth:E})})}const cs=as({isInternal:!1}),us=as({isInternal:!0});cs.displayName="SmoothStepEdge";us.displayName="SmoothStepEdgeInternal";function ls(e){return L.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return R.jsx(cs,{...n,id:r,pathOptions:L.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const Dh=ls({isInternal:!1}),fs=ls({isInternal:!0});Dh.displayName="StepEdge";fs.displayName="StepEdgeInternal";function ds(e){return L.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:l,style:d,markerEnd:p,markerStart:h,interactionWidth:x})=>{const[w,m,E]=ki({sourceX:n,sourceY:r,targetX:o,targetY:i}),g=e.isInternal?void 0:t;return R.jsx(dn,{id:g,path:w,labelX:m,labelY:E,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:l,style:d,markerEnd:p,markerStart:h,interactionWidth:x})})}const Lh=ds({isInternal:!1}),hs=ds({isInternal:!0});Lh.displayName="StraightEdge";hs.displayName="StraightEdgeInternal";function gs(e){return L.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s=G.Bottom,targetPosition:a=G.Top,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:x,markerStart:w,pathOptions:m,interactionWidth:E})=>{const[g,v,M]=Mi({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:a,curvature:m==null?void 0:m.curvature}),S=e.isInternal?void 0:t;return R.jsx(dn,{id:S,path:g,labelX:v,labelY:M,label:u,labelStyle:c,labelShowBg:f,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:x,markerStart:w,interactionWidth:E})})}const Hh=gs({isInternal:!1}),ps=gs({isInternal:!0});Hh.displayName="BezierEdge";ps.displayName="BezierEdgeInternal";const Ao={default:ps,straight:hs,step:fs,smoothstep:us,simplebezier:ss},Io={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Oh=(e,t,n)=>n===G.Left?e-t:n===G.Right?e+t:e,Vh=(e,t,n)=>n===G.Top?e-t:n===G.Bottom?e+t:e,ko="react-flow__edgeupdater";function To({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:a}){return R.jsx("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:se([ko,`${ko}-${a}`]),cx:Oh(t,r,e),cy:Vh(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Bh({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:i,targetY:s,sourcePosition:a,targetPosition:u,onReconnect:c,onReconnectStart:f,onReconnectEnd:l,setReconnecting:d,setUpdateHover:p}){const h=ie(),x=(v,M)=>{if(v.button!==0)return;const{autoPanOnConnect:S,domNode:b,isValidConnection:D,connectionMode:z,connectionRadius:j,lib:k,onConnectStart:$,onConnectEnd:B,cancelConnection:_,nodeLookup:T,rfId:C,panBy:P,updateConnection:I}=h.getState(),A=M.type==="target",H=(V,O)=>{d(!1),l==null||l(V,n,M.type,O)},y=V=>c==null?void 0:c(n,V),N=(V,O)=>{d(!0),f==null||f(v,n,M.type),$==null||$(V,O)};Yn.onPointerDown(v.nativeEvent,{autoPanOnConnect:S,connectionMode:z,connectionRadius:j,domNode:b,handleId:M.id,nodeId:M.nodeId,nodeLookup:T,isTarget:A,edgeUpdaterType:M.type,lib:k,flowId:C,cancelConnection:_,panBy:P,isValidConnection:D,onConnect:y,onConnectStart:N,onConnectEnd:B,onReconnectEnd:H,updateConnection:I,getTransform:()=>h.getState().transform,getFromHandle:()=>h.getState().connection.fromHandle,dragThreshold:h.getState().connectionDragThreshold,handleDomNode:v.currentTarget})},w=v=>x(v,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),m=v=>x(v,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),E=()=>p(!0),g=()=>p(!1);return R.jsxs(R.Fragment,{children:[(e===!0||e==="source")&&R.jsx(To,{position:a,centerX:r,centerY:o,radius:t,onMouseDown:w,onMouseEnter:E,onMouseOut:g,type:"source"}),(e===!0||e==="target")&&R.jsx(To,{position:u,centerX:i,centerY:s,radius:t,onMouseDown:m,onMouseEnter:E,onMouseOut:g,type:"target"})]})}function jh({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:i,onContextMenu:s,onMouseEnter:a,onMouseMove:u,onMouseLeave:c,reconnectRadius:f,onReconnect:l,onReconnectStart:d,onReconnectEnd:p,rfId:h,edgeTypes:x,noPanClassName:w,onError:m,disableKeyboardA11y:E}){let g=J(Z=>Z.edgeLookup.get(e));const v=J(Z=>Z.defaultEdgeOptions);g=v?{...v,...g}:g;let M=g.type||"default",S=(x==null?void 0:x[M])||Ao[M];S===void 0&&(m==null||m("011",we.error011(M)),M="default",S=(x==null?void 0:x.default)||Ao.default);const b=!!(g.focusable||t&&typeof g.focusable>"u"),D=typeof l<"u"&&(g.reconnectable||n&&typeof g.reconnectable>"u"),z=!!(g.selectable||r&&typeof g.selectable>"u"),j=L.useRef(null),[k,$]=L.useState(!1),[B,_]=L.useState(!1),T=ie(),{zIndex:C,sourceX:P,sourceY:I,targetX:A,targetY:H,sourcePosition:y,targetPosition:N}=J(L.useCallback(Z=>{const U=Z.nodeLookup.get(g.source),ne=Z.nodeLookup.get(g.target);if(!U||!ne)return{zIndex:g.zIndex,...Io};const oe=kf({id:e,sourceNode:U,targetNode:ne,sourceHandle:g.sourceHandle||null,targetHandle:g.targetHandle||null,connectionMode:Z.connectionMode,onError:m});return{zIndex:bf({selected:g.selected,zIndex:g.zIndex,sourceNode:U,targetNode:ne,elevateOnSelect:Z.elevateEdgesOnSelect,zIndexMode:Z.zIndexMode}),...oe||Io}},[g.source,g.target,g.sourceHandle,g.targetHandle,g.selected,g.zIndex]),re),V=L.useMemo(()=>g.markerStart?`url('#${jn(g.markerStart,h)}')`:void 0,[g.markerStart,h]),O=L.useMemo(()=>g.markerEnd?`url('#${jn(g.markerEnd,h)}')`:void 0,[g.markerEnd,h]);if(g.hidden||P===null||I===null||A===null||H===null)return null;const Y=Z=>{var te;const{addSelectedEdges:U,unselectNodesAndEdges:ne,multiSelectionActive:oe}=T.getState();z&&(T.setState({nodesSelectionActive:!1}),g.selected&&oe?(ne({nodes:[],edges:[g]}),(te=j.current)==null||te.blur()):U([e])),o&&o(Z,g)},X=i?Z=>{i(Z,{...g})}:void 0,q=s?Z=>{s(Z,{...g})}:void 0,F=a?Z=>{a(Z,{...g})}:void 0,W=u?Z=>{u(Z,{...g})}:void 0,ee=c?Z=>{c(Z,{...g})}:void 0,Q=Z=>{var U;if(!E&&di.includes(Z.key)&&z){const{unselectNodesAndEdges:ne,addSelectedEdges:oe}=T.getState();Z.key==="Escape"?((U=j.current)==null||U.blur(),ne({edges:[g]})):oe([e])}};return R.jsx("svg",{style:{zIndex:C},children:R.jsxs("g",{className:se(["react-flow__edge",`react-flow__edge-${M}`,g.className,w,{selected:g.selected,animated:g.animated,inactive:!z&&!o,updating:k,selectable:z}]),onClick:Y,onDoubleClick:X,onContextMenu:q,onMouseEnter:F,onMouseMove:W,onMouseLeave:ee,onKeyDown:b?Q:void 0,tabIndex:b?0:void 0,role:g.ariaRole??(b?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":g.ariaLabel===null?void 0:g.ariaLabel||`Edge from ${g.source} to ${g.target}`,"aria-describedby":b?`${Xi}-${h}`:void 0,ref:j,...g.domAttributes,children:[!B&&R.jsx(S,{id:e,source:g.source,target:g.target,type:g.type,selected:g.selected,animated:g.animated,selectable:z,deletable:g.deletable??!0,label:g.label,labelStyle:g.labelStyle,labelShowBg:g.labelShowBg,labelBgStyle:g.labelBgStyle,labelBgPadding:g.labelBgPadding,labelBgBorderRadius:g.labelBgBorderRadius,sourceX:P,sourceY:I,targetX:A,targetY:H,sourcePosition:y,targetPosition:N,data:g.data,style:g.style,sourceHandleId:g.sourceHandle,targetHandleId:g.targetHandle,markerStart:V,markerEnd:O,pathOptions:"pathOptions"in g?g.pathOptions:void 0,interactionWidth:g.interactionWidth}),D&&R.jsx(Bh,{edge:g,isReconnectable:D,reconnectRadius:f,onReconnect:l,onReconnectStart:d,onReconnectEnd:p,sourceX:P,sourceY:I,targetX:A,targetY:H,sourcePosition:y,targetPosition:N,setUpdateHover:$,setReconnecting:_})]})})}var Fh=L.memo(jh);const Yh=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function ms({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:f,reconnectRadius:l,onEdgeDoubleClick:d,onReconnectStart:p,onReconnectEnd:h,disableKeyboardA11y:x}){const{edgesFocusable:w,edgesReconnectable:m,elementsSelectable:E,onError:g}=J(Yh,re),v=Ah(t);return R.jsxs("div",{className:"react-flow__edges",children:[R.jsx(Ph,{defaultColor:e,rfId:n}),v.map(M=>R.jsx(Fh,{id:M,edgesFocusable:w,edgesReconnectable:m,elementsSelectable:E,noPanClassName:o,onReconnect:i,onContextMenu:s,onMouseEnter:a,onMouseMove:u,onMouseLeave:c,onClick:f,reconnectRadius:l,onDoubleClick:d,onReconnectStart:p,onReconnectEnd:h,rfId:n,onError:g,edgeTypes:r,disableKeyboardA11y:x},M))]})}ms.displayName="EdgeRenderer";const Xh=L.memo(ms),qh=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Wh({children:e}){const t=J(qh);return R.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Gh(e){const t=lr(),n=L.useRef(!1);L.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Uh=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Zh(e){const t=J(Uh),n=ie();return L.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Kh(e){return e.connection.inProgress?{...e.connection,to:St(e.connection.to,e.transform)}:{...e.connection}}function Qh(e){return Kh}function Jh(e){const t=Qh();return J(t,re)}const eg=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function tg({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:i,height:s,isValid:a,inProgress:u}=J(eg,re);return!(i&&o&&u)?null:R.jsx("svg",{style:e,width:i,height:s,className:"react-flow__connectionline react-flow__container",children:R.jsx("g",{className:se(["react-flow__connection",pi(a)]),children:R.jsx(ys,{style:t,type:n,CustomComponent:r,isValid:a})})})}const ys=({style:e,type:t=Ie.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:i,fromNode:s,fromHandle:a,fromPosition:u,to:c,toNode:f,toHandle:l,toPosition:d,pointer:p}=Jh();if(!o)return;if(n)return R.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:i.x,fromY:i.y,toX:c.x,toY:c.y,fromPosition:u,toPosition:d,connectionStatus:pi(r),toNode:f,toHandle:l,pointer:p});let h="";const x={sourceX:i.x,sourceY:i.y,sourcePosition:u,targetX:c.x,targetY:c.y,targetPosition:d};switch(t){case Ie.Bezier:[h]=Mi(x);break;case Ie.SimpleBezier:[h]=os(x);break;case Ie.Step:[h]=Bn({...x,borderRadius:0});break;case Ie.SmoothStep:[h]=Bn(x);break;default:[h]=ki(x)}return R.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};ys.displayName="ConnectionLine";const ng={};function $o(e=ng){L.useRef(e),ie(),L.useEffect(()=>{},[e])}function rg(){ie(),L.useRef(!1),L.useEffect(()=>{},[])}function xs({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:u,onNodeMouseLeave:c,onNodeContextMenu:f,onSelectionContextMenu:l,onSelectionStart:d,onSelectionEnd:p,connectionLineType:h,connectionLineStyle:x,connectionLineComponent:w,connectionLineContainerStyle:m,selectionKeyCode:E,selectionOnDrag:g,selectionMode:v,multiSelectionKeyCode:M,panActivationKeyCode:S,zoomActivationKeyCode:b,deleteKeyCode:D,onlyRenderVisibleElements:z,elementsSelectable:j,defaultViewport:k,translateExtent:$,minZoom:B,maxZoom:_,preventScrolling:T,defaultMarkerColor:C,zoomOnScroll:P,zoomOnPinch:I,panOnScroll:A,panOnScrollSpeed:H,panOnScrollMode:y,zoomOnDoubleClick:N,panOnDrag:V,onPaneClick:O,onPaneMouseEnter:Y,onPaneMouseMove:X,onPaneMouseLeave:q,onPaneScroll:F,onPaneContextMenu:W,paneClickDistance:ee,nodeClickDistance:Q,onEdgeContextMenu:Z,onEdgeMouseEnter:U,onEdgeMouseMove:ne,onEdgeMouseLeave:oe,reconnectRadius:te,onReconnect:ae,onReconnectStart:Ce,onReconnectEnd:_e,noDragClassName:Te,noWheelClassName:et,noPanClassName:tt,disableKeyboardA11y:nt,nodeExtent:hn,rfId:Nt,viewport:Be,onViewportChange:rt}){return $o(e),$o(t),rg(),Gh(n),Zh(Be),R.jsx(xh,{onPaneClick:O,onPaneMouseEnter:Y,onPaneMouseMove:X,onPaneMouseLeave:q,onPaneContextMenu:W,onPaneScroll:F,paneClickDistance:ee,deleteKeyCode:D,selectionKeyCode:E,selectionOnDrag:g,selectionMode:v,onSelectionStart:d,onSelectionEnd:p,multiSelectionKeyCode:M,panActivationKeyCode:S,zoomActivationKeyCode:b,elementsSelectable:j,zoomOnScroll:P,zoomOnPinch:I,zoomOnDoubleClick:N,panOnScroll:A,panOnScrollSpeed:H,panOnScrollMode:y,panOnDrag:V,defaultViewport:k,translateExtent:$,minZoom:B,maxZoom:_,onSelectionContextMenu:l,preventScrolling:T,noDragClassName:Te,noWheelClassName:et,noPanClassName:tt,disableKeyboardA11y:nt,onViewportChange:rt,isControlledViewport:!!Be,children:R.jsxs(Wh,{children:[R.jsx(Xh,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:s,onReconnect:ae,onReconnectStart:Ce,onReconnectEnd:_e,onlyRenderVisibleElements:z,onEdgeContextMenu:Z,onEdgeMouseEnter:U,onEdgeMouseMove:ne,onEdgeMouseLeave:oe,reconnectRadius:te,defaultMarkerColor:C,noPanClassName:tt,disableKeyboardA11y:nt,rfId:Nt}),R.jsx(tg,{style:x,type:h,component:w,containerStyle:m}),R.jsx("div",{className:"react-flow__edgelabel-renderer"}),R.jsx(Mh,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:u,onNodeMouseLeave:c,onNodeContextMenu:f,nodeClickDistance:Q,onlyRenderVisibleElements:z,noPanClassName:tt,noDragClassName:Te,disableKeyboardA11y:nt,nodeExtent:hn,rfId:Nt}),R.jsx("div",{className:"react-flow__viewport-portal"})]})})}xs.displayName="GraphView";const og=L.memo(xs),Po=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,fitViewOptions:a,minZoom:u=.5,maxZoom:c=2,nodeOrigin:f,nodeExtent:l,zIndexMode:d="basic"}={})=>{const p=new Map,h=new Map,x=new Map,w=new Map,m=r??t??[],E=n??e??[],g=f??[0,0],v=l??pt;Pi(x,w,m);const M=Fn(E,p,h,{nodeOrigin:g,nodeExtent:v,zIndexMode:d});let S=[0,0,1];if(s&&o&&i){const b=Je(p,{filter:k=>!!((k.width||k.initialWidth)&&(k.height||k.initialHeight))}),{x:D,y:z,zoom:j}=rr(b,o,i,u,c,(a==null?void 0:a.padding)??.1);S=[D,z,j]}return{rfId:"1",width:o??0,height:i??0,transform:S,nodes:E,nodesInitialized:M,nodeLookup:p,parentLookup:h,edges:m,edgeLookup:w,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:c,translateExtent:pt,nodeExtent:v,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ue.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:g,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:a,fitViewResolver:null,connection:{...gi},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:yf,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:hi,zIndexMode:d,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},ig=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,fitViewOptions:a,minZoom:u,maxZoom:c,nodeOrigin:f,nodeExtent:l,zIndexMode:d})=>bd((p,h)=>{async function x(){const{nodeLookup:w,panZoom:m,fitViewOptions:E,fitViewResolver:g,width:v,height:M,minZoom:S,maxZoom:b}=h();m&&(await pf({nodes:w,width:v,height:M,panZoom:m,minZoom:S,maxZoom:b},E),g==null||g.resolve(!0),p({fitViewResolver:null}))}return{...Po({nodes:e,edges:t,width:o,height:i,fitView:s,fitViewOptions:a,minZoom:u,maxZoom:c,nodeOrigin:f,nodeExtent:l,defaultNodes:n,defaultEdges:r,zIndexMode:d}),setNodes:w=>{const{nodeLookup:m,parentLookup:E,nodeOrigin:g,elevateNodesOnSelect:v,fitViewQueued:M,zIndexMode:S}=h(),b=Fn(w,m,E,{nodeOrigin:g,nodeExtent:l,elevateNodesOnSelect:v,checkEquality:!0,zIndexMode:S});M&&b?(x(),p({nodes:w,nodesInitialized:b,fitViewQueued:!1,fitViewOptions:void 0})):p({nodes:w,nodesInitialized:b})},setEdges:w=>{const{connectionLookup:m,edgeLookup:E}=h();Pi(m,E,w),p({edges:w})},setDefaultNodesAndEdges:(w,m)=>{if(w){const{setNodes:E}=h();E(w),p({hasDefaultNodes:!0})}if(m){const{setEdges:E}=h();E(m),p({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:m,nodeLookup:E,parentLookup:g,domNode:v,nodeOrigin:M,nodeExtent:S,debug:b,fitViewQueued:D,zIndexMode:z}=h(),{changes:j,updatedInternals:k}=Of(w,E,g,v,M,S,z);k&&(zf(E,g,{nodeOrigin:M,nodeExtent:S,zIndexMode:z}),D?(x(),p({fitViewQueued:!1,fitViewOptions:void 0})):p({}),(j==null?void 0:j.length)>0&&(b&&console.log("React Flow: trigger node changes",j),m==null||m(j)))},updateNodePositions:(w,m=!1)=>{const E=[];let g=[];const{nodeLookup:v,triggerNodeChanges:M,connection:S,updateConnection:b,onNodesChangeMiddlewareMap:D}=h();for(const[z,j]of w){const k=v.get(z),$=!!(k!=null&&k.expandParent&&(k!=null&&k.parentId)&&(j!=null&&j.position)),B={id:z,type:"position",position:$?{x:Math.max(0,j.position.x),y:Math.max(0,j.position.y)}:j.position,dragging:m};if(k&&S.inProgress&&S.fromNode.id===k.id){const _=Oe(k,S.fromHandle,G.Left,!0);b({...S,from:_})}$&&k.parentId&&E.push({id:z,parentId:k.parentId,rect:{...j.internals.positionAbsolute,width:j.measured.width??0,height:j.measured.height??0}}),g.push(B)}if(E.length>0){const{parentLookup:z,nodeOrigin:j}=h(),k=ur(E,v,z,j);g.push(...k)}for(const z of D.values())g=z(g);M(g)},triggerNodeChanges:w=>{const{onNodesChange:m,setNodes:E,nodes:g,hasDefaultNodes:v,debug:M}=h();if(w!=null&&w.length){if(v){const S=Gi(w,g);E(S)}M&&console.log("React Flow: trigger node changes",w),m==null||m(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:m,setEdges:E,edges:g,hasDefaultEdges:v,debug:M}=h();if(w!=null&&w.length){if(v){const S=Ui(w,g);E(S)}M&&console.log("React Flow: trigger edge changes",w),m==null||m(w)}},addSelectedNodes:w=>{const{multiSelectionActive:m,edgeLookup:E,nodeLookup:g,triggerNodeChanges:v,triggerEdgeChanges:M}=h();if(m){const S=w.map(b=>$e(b,!0));v(S);return}v(Ye(g,new Set([...w]),!0)),M(Ye(E))},addSelectedEdges:w=>{const{multiSelectionActive:m,edgeLookup:E,nodeLookup:g,triggerNodeChanges:v,triggerEdgeChanges:M}=h();if(m){const S=w.map(b=>$e(b,!0));M(S);return}M(Ye(E,new Set([...w]))),v(Ye(g,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:m}={})=>{const{edges:E,nodes:g,nodeLookup:v,triggerNodeChanges:M,triggerEdgeChanges:S}=h(),b=w||g,D=m||E,z=b.map(k=>{const $=v.get(k.id);return $&&($.selected=!1),$e(k.id,!1)}),j=D.map(k=>$e(k.id,!1));M(z),S(j)},setMinZoom:w=>{const{panZoom:m,maxZoom:E}=h();m==null||m.setScaleExtent([w,E]),p({minZoom:w})},setMaxZoom:w=>{const{panZoom:m,minZoom:E}=h();m==null||m.setScaleExtent([E,w]),p({maxZoom:w})},setTranslateExtent:w=>{var m;(m=h().panZoom)==null||m.setTranslateExtent(w),p({translateExtent:w})},resetSelectedElements:()=>{const{edges:w,nodes:m,triggerNodeChanges:E,triggerEdgeChanges:g,elementsSelectable:v}=h();if(!v)return;const M=m.reduce((b,D)=>D.selected?[...b,$e(D.id,!1)]:b,[]),S=w.reduce((b,D)=>D.selected?[...b,$e(D.id,!1)]:b,[]);E(M),g(S)},setNodeExtent:w=>{const{nodes:m,nodeLookup:E,parentLookup:g,nodeOrigin:v,elevateNodesOnSelect:M,nodeExtent:S,zIndexMode:b}=h();w[0][0]===S[0][0]&&w[0][1]===S[0][1]&&w[1][0]===S[1][0]&&w[1][1]===S[1][1]||(Fn(m,E,g,{nodeOrigin:v,nodeExtent:w,elevateNodesOnSelect:M,checkEquality:!1,zIndexMode:b}),p({nodeExtent:w}))},panBy:w=>{const{transform:m,width:E,height:g,panZoom:v,translateExtent:M}=h();return Vf({delta:w,panZoom:v,transform:m,translateExtent:M,width:E,height:g})},setCenter:async(w,m,E)=>{const{width:g,height:v,maxZoom:M,panZoom:S}=h();if(!S)return Promise.resolve(!1);const b=typeof(E==null?void 0:E.zoom)<"u"?E.zoom:M;return await S.setViewport({x:g/2-w*b,y:v/2-m*b,zoom:b},{duration:E==null?void 0:E.duration,ease:E==null?void 0:E.ease,interpolate:E==null?void 0:E.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{p({connection:{...gi}})},updateConnection:w=>{p({connection:w})},reset:()=>p({...Po()})}},Object.is);function sg({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,initialMinZoom:s,initialMaxZoom:a,initialFitViewOptions:u,fitView:c,nodeOrigin:f,nodeExtent:l,zIndexMode:d,children:p}){const[h]=L.useState(()=>ig({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:c,minZoom:s,maxZoom:a,fitViewOptions:u,nodeOrigin:f,nodeExtent:l,zIndexMode:d}));return R.jsx(Sd,{value:h,children:R.jsx(Wd,{children:p})})}function ag({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:s,fitView:a,fitViewOptions:u,minZoom:c,maxZoom:f,nodeOrigin:l,nodeExtent:d,zIndexMode:p}){return L.useContext(un)?R.jsx(R.Fragment,{children:e}):R.jsx(sg,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:s,fitView:a,initialFitViewOptions:u,initialMinZoom:c,initialMaxZoom:f,nodeOrigin:l,nodeExtent:d,zIndexMode:p,children:e})}const cg={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function ug({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i,edgeTypes:s,onNodeClick:a,onEdgeClick:u,onInit:c,onMove:f,onMoveStart:l,onMoveEnd:d,onConnect:p,onConnectStart:h,onConnectEnd:x,onClickConnectStart:w,onClickConnectEnd:m,onNodeMouseEnter:E,onNodeMouseMove:g,onNodeMouseLeave:v,onNodeContextMenu:M,onNodeDoubleClick:S,onNodeDragStart:b,onNodeDrag:D,onNodeDragStop:z,onNodesDelete:j,onEdgesDelete:k,onDelete:$,onSelectionChange:B,onSelectionDragStart:_,onSelectionDrag:T,onSelectionDragStop:C,onSelectionContextMenu:P,onSelectionStart:I,onSelectionEnd:A,onBeforeDelete:H,connectionMode:y,connectionLineType:N=Ie.Bezier,connectionLineStyle:V,connectionLineComponent:O,connectionLineContainerStyle:Y,deleteKeyCode:X="Backspace",selectionKeyCode:q="Shift",selectionOnDrag:F=!1,selectionMode:W=mt.Full,panActivationKeyCode:ee="Space",multiSelectionKeyCode:Q=xt()?"Meta":"Control",zoomActivationKeyCode:Z=xt()?"Meta":"Control",snapToGrid:U,snapGrid:ne,onlyRenderVisibleElements:oe=!1,selectNodesOnDrag:te,nodesDraggable:ae,autoPanOnNodeFocus:Ce,nodesConnectable:_e,nodesFocusable:Te,nodeOrigin:et=qi,edgesFocusable:tt,edgesReconnectable:nt,elementsSelectable:hn=!0,defaultViewport:Nt=Ld,minZoom:Be=.5,maxZoom:rt=2,translateExtent:hr=pt,preventScrolling:Es=!0,nodeExtent:gn,defaultMarkerColor:bs="#b1b1b7",zoomOnScroll:Ss=!0,zoomOnPinch:Ns=!0,panOnScroll:Cs=!1,panOnScrollSpeed:Ms=.5,panOnScrollMode:As=ze.Free,zoomOnDoubleClick:Is=!0,panOnDrag:ks=!0,onPaneClick:Ts,onPaneMouseEnter:$s,onPaneMouseMove:Ps,onPaneMouseLeave:Rs,onPaneScroll:zs,onPaneContextMenu:Ds,paneClickDistance:Ls=1,nodeClickDistance:Hs=0,children:Os,onReconnect:Vs,onReconnectStart:Bs,onReconnectEnd:js,onEdgeContextMenu:Fs,onEdgeDoubleClick:Ys,onEdgeMouseEnter:Xs,onEdgeMouseMove:qs,onEdgeMouseLeave:Ws,reconnectRadius:Gs=10,onNodesChange:Us,onEdgesChange:Zs,noDragClassName:Ks="nodrag",noWheelClassName:Qs="nowheel",noPanClassName:gr="nopan",fitView:pr,fitViewOptions:mr,connectOnClick:Js,attributionPosition:ea,proOptions:ta,defaultEdgeOptions:na,elevateNodesOnSelect:ra=!0,elevateEdgesOnSelect:oa=!1,disableKeyboardA11y:yr=!1,autoPanOnConnect:ia,autoPanOnNodeDrag:sa,autoPanSpeed:aa,connectionRadius:ca,isValidConnection:ua,onError:la,style:fa,id:xr,nodeDragThreshold:da,connectionDragThreshold:ha,viewport:ga,onViewportChange:pa,width:ma,height:ya,colorMode:xa="light",debug:wa,onScroll:Ct,ariaLabelConfig:va,zIndexMode:wr="basic",..._a},Ea){const pn=xr||"1",ba=Bd(xa),Sa=L.useCallback(vr=>{vr.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ct==null||Ct(vr)},[Ct]);return R.jsx("div",{"data-testid":"rf__wrapper",..._a,onScroll:Sa,style:{...fa,...cg},ref:Ea,className:se(["react-flow",o,ba]),id:xr,role:"application",children:R.jsxs(ag,{nodes:e,edges:t,width:ma,height:ya,fitView:pr,fitViewOptions:mr,minZoom:Be,maxZoom:rt,nodeOrigin:et,nodeExtent:gn,zIndexMode:wr,children:[R.jsx(og,{onInit:c,onNodeClick:a,onEdgeClick:u,onNodeMouseEnter:E,onNodeMouseMove:g,onNodeMouseLeave:v,onNodeContextMenu:M,onNodeDoubleClick:S,nodeTypes:i,edgeTypes:s,connectionLineType:N,connectionLineStyle:V,connectionLineComponent:O,connectionLineContainerStyle:Y,selectionKeyCode:q,selectionOnDrag:F,selectionMode:W,deleteKeyCode:X,multiSelectionKeyCode:Q,panActivationKeyCode:ee,zoomActivationKeyCode:Z,onlyRenderVisibleElements:oe,defaultViewport:Nt,translateExtent:hr,minZoom:Be,maxZoom:rt,preventScrolling:Es,zoomOnScroll:Ss,zoomOnPinch:Ns,zoomOnDoubleClick:Is,panOnScroll:Cs,panOnScrollSpeed:Ms,panOnScrollMode:As,panOnDrag:ks,onPaneClick:Ts,onPaneMouseEnter:$s,onPaneMouseMove:Ps,onPaneMouseLeave:Rs,onPaneScroll:zs,onPaneContextMenu:Ds,paneClickDistance:Ls,nodeClickDistance:Hs,onSelectionContextMenu:P,onSelectionStart:I,onSelectionEnd:A,onReconnect:Vs,onReconnectStart:Bs,onReconnectEnd:js,onEdgeContextMenu:Fs,onEdgeDoubleClick:Ys,onEdgeMouseEnter:Xs,onEdgeMouseMove:qs,onEdgeMouseLeave:Ws,reconnectRadius:Gs,defaultMarkerColor:bs,noDragClassName:Ks,noWheelClassName:Qs,noPanClassName:gr,rfId:pn,disableKeyboardA11y:yr,nodeExtent:gn,viewport:ga,onViewportChange:pa}),R.jsx(Vd,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:h,onConnectEnd:x,onClickConnectStart:w,onClickConnectEnd:m,nodesDraggable:ae,autoPanOnNodeFocus:Ce,nodesConnectable:_e,nodesFocusable:Te,edgesFocusable:tt,edgesReconnectable:nt,elementsSelectable:hn,elevateNodesOnSelect:ra,elevateEdgesOnSelect:oa,minZoom:Be,maxZoom:rt,nodeExtent:gn,onNodesChange:Us,onEdgesChange:Zs,snapToGrid:U,snapGrid:ne,connectionMode:y,translateExtent:hr,connectOnClick:Js,defaultEdgeOptions:na,fitView:pr,fitViewOptions:mr,onNodesDelete:j,onEdgesDelete:k,onDelete:$,onNodeDragStart:b,onNodeDrag:D,onNodeDragStop:z,onSelectionDrag:T,onSelectionDragStart:_,onSelectionDragStop:C,onMove:f,onMoveStart:l,onMoveEnd:d,noPanClassName:gr,nodeOrigin:et,rfId:pn,autoPanOnConnect:ia,autoPanOnNodeDrag:sa,autoPanSpeed:aa,onError:la,connectionRadius:ca,isValidConnection:ua,selectNodesOnDrag:te,nodeDragThreshold:da,connectionDragThreshold:ha,onBeforeDelete:H,debug:wa,ariaLabelConfig:va,zIndexMode:wr}),R.jsx(Dd,{onSelectionChange:B}),Os,R.jsx(Td,{proOptions:ta,position:ea}),R.jsx(kd,{rfId:pn,disableKeyboardA11y:yr})]})})}var Gg=Zi(ug);const lg=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function Ug({children:e}){const t=J(lg);return t?Wn.createPortal(e,t):null}const fg=e=>e.nodes;function Zg(){return J(fg,re)}const dg=e=>e.edges;function Kg(){return J(dg,re)}const hg=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function Qg(){return J(hg,re)}function Jg(e){const[t,n]=L.useState(e),r=L.useCallback(o=>n(i=>Gi(o,i)),[]);return[t,n,r]}function e0(e){const[t,n]=L.useState(e),r=L.useCallback(o=>n(i=>Ui(o,i)),[]);return[t,n,r]}function gg({dimensions:e,lineWidth:t,variant:n,className:r}){return R.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:se(["react-flow__background-pattern",n,r])})}function pg({radius:e,className:t}){return R.jsx("circle",{cx:e,cy:e,r:e,className:se(["react-flow__background-pattern","dots",t])})}var ke;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ke||(ke={}));const mg={[ke.Dots]:1,[ke.Lines]:1,[ke.Cross]:6},yg=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function ws({id:e,variant:t=ke.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:s,bgColor:a,style:u,className:c,patternClassName:f}){const l=L.useRef(null),{transform:d,patternId:p}=J(yg,re),h=r||mg[t],x=t===ke.Dots,w=t===ke.Cross,m=Array.isArray(n)?n:[n,n],E=[m[0]*d[2]||1,m[1]*d[2]||1],g=h*d[2],v=Array.isArray(i)?i:[i,i],M=w?[g,g]:E,S=[v[0]*d[2]||1+M[0]/2,v[1]*d[2]||1+M[1]/2],b=`${p}${e||""}`;return R.jsxs("svg",{className:se(["react-flow__background",c]),style:{...u,...fn,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:l,"data-testid":"rf__background",children:[R.jsx("pattern",{id:b,x:d[0]%E[0],y:d[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${S[0]},-${S[1]})`,children:x?R.jsx(pg,{radius:g/2,className:f}):R.jsx(gg,{dimensions:M,lineWidth:o,variant:t,className:f})}),R.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${b})`})]})}ws.displayName="Background";const t0=L.memo(ws);function xg(){return R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:R.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function wg(){return R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:R.jsx("path",{d:"M0 0h32v4.2H0z"})})}function vg(){return R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:R.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function _g(){return R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:R.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Eg(){return R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:R.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function zt({children:e,className:t,...n}){return R.jsx("button",{type:"button",className:se(["react-flow__controls-button",t]),...n,children:e})}const bg=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function vs({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:a,onInteractiveChange:u,className:c,children:f,position:l="bottom-left",orientation:d="vertical","aria-label":p}){const h=ie(),{isInteractive:x,minZoomReached:w,maxZoomReached:m,ariaLabelConfig:E}=J(bg,re),{zoomIn:g,zoomOut:v,fitView:M}=lr(),S=()=>{g(),i==null||i()},b=()=>{v(),s==null||s()},D=()=>{M(o),a==null||a()},z=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),u==null||u(!x)},j=d==="horizontal"?"horizontal":"vertical";return R.jsxs(ln,{className:se(["react-flow__controls",j,c]),position:l,style:e,"data-testid":"rf__controls","aria-label":p??E["controls.ariaLabel"],children:[t&&R.jsxs(R.Fragment,{children:[R.jsx(zt,{onClick:S,className:"react-flow__controls-zoomin",title:E["controls.zoomIn.ariaLabel"],"aria-label":E["controls.zoomIn.ariaLabel"],disabled:m,children:R.jsx(xg,{})}),R.jsx(zt,{onClick:b,className:"react-flow__controls-zoomout",title:E["controls.zoomOut.ariaLabel"],"aria-label":E["controls.zoomOut.ariaLabel"],disabled:w,children:R.jsx(wg,{})})]}),n&&R.jsx(zt,{className:"react-flow__controls-fitview",onClick:D,title:E["controls.fitView.ariaLabel"],"aria-label":E["controls.fitView.ariaLabel"],children:R.jsx(vg,{})}),r&&R.jsx(zt,{className:"react-flow__controls-interactive",onClick:z,title:E["controls.interactive.ariaLabel"],"aria-label":E["controls.interactive.ariaLabel"],children:x?R.jsx(Eg,{}):R.jsx(_g,{})}),f]})}vs.displayName="Controls";const n0=L.memo(vs);function Sg({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:a,strokeWidth:u,className:c,borderRadius:f,shapeRendering:l,selected:d,onClick:p}){const{background:h,backgroundColor:x}=i||{},w=s||h||x;return R.jsx("rect",{className:se(["react-flow__minimap-node",{selected:d},c]),x:t,y:n,rx:f,ry:f,width:r,height:o,style:{fill:w,stroke:a,strokeWidth:u},shapeRendering:l,onClick:p?m=>p(m,e):void 0})}const Ng=L.memo(Sg),Cg=e=>e.nodes.map(t=>t.id),Tn=e=>e instanceof Function?e:()=>e;function Mg({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:i=Ng,onClick:s}){const a=J(Cg,re),u=Tn(t),c=Tn(e),f=Tn(n),l=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return R.jsx(R.Fragment,{children:a.map(d=>R.jsx(Ig,{id:d,nodeColorFunc:u,nodeStrokeColorFunc:c,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:i,onClick:s,shapeRendering:l},d))})}function Ag({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:i,shapeRendering:s,NodeComponent:a,onClick:u}){const{node:c,x:f,y:l,width:d,height:p}=J(h=>{const{internals:x}=h.nodeLookup.get(e),w=x.userNode,{x:m,y:E}=x.positionAbsolute,{width:g,height:v}=Ne(w);return{node:w,x:m,y:E,width:g,height:v}},re);return!c||c.hidden||!_i(c)?null:R.jsx(a,{x:f,y:l,width:d,height:p,style:c.style,selected:!!c.selected,className:r(c),color:t(c),borderRadius:o,strokeColor:n(c),strokeWidth:i,shapeRendering:s,onClick:u,id:c.id})}const Ig=L.memo(Ag);var kg=L.memo(Mg);const Tg=200,$g=150,Pg=e=>!e.hidden,Rg=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?vi(Je(e.nodeLookup,{filter:Pg}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},zg="react-flow__minimap-desc";function _s({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:u,maskColor:c,maskStrokeColor:f,maskStrokeWidth:l,position:d="bottom-right",onClick:p,onNodeClick:h,pannable:x=!1,zoomable:w=!1,ariaLabel:m,inversePan:E,zoomStep:g=1,offsetScale:v=5}){const M=ie(),S=L.useRef(null),{boundingRect:b,viewBB:D,rfId:z,panZoom:j,translateExtent:k,flowWidth:$,flowHeight:B,ariaLabelConfig:_}=J(Rg,re),T=(e==null?void 0:e.width)??Tg,C=(e==null?void 0:e.height)??$g,P=b.width/T,I=b.height/C,A=Math.max(P,I),H=A*T,y=A*C,N=v*A,V=b.x-(H-b.width)/2-N,O=b.y-(y-b.height)/2-N,Y=H+N*2,X=y+N*2,q=`${zg}-${z}`,F=L.useRef(0),W=L.useRef();F.current=A,L.useEffect(()=>{if(S.current&&j)return W.current=Uf({domNode:S.current,panZoom:j,getTransform:()=>M.getState().transform,getViewScale:()=>F.current}),()=>{var U;(U=W.current)==null||U.destroy()}},[j]),L.useEffect(()=>{var U;(U=W.current)==null||U.update({translateExtent:k,width:$,height:B,inversePan:E,pannable:x,zoomStep:g,zoomable:w})},[x,w,E,g,k,$,B]);const ee=p?U=>{var te;const[ne,oe]=((te=W.current)==null?void 0:te.pointer(U))||[0,0];p(U,{x:ne,y:oe})}:void 0,Q=h?L.useCallback((U,ne)=>{const oe=M.getState().nodeLookup.get(ne).internals.userNode;h(U,oe)},[]):void 0,Z=m??_["minimap.ariaLabel"];return R.jsx(ln,{position:d,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof l=="number"?l*A:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:se(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:R.jsxs("svg",{width:T,height:C,viewBox:`${V} ${O} ${Y} ${X}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":q,ref:S,onClick:ee,children:[Z&&R.jsx("title",{id:q,children:Z}),R.jsx(kg,{onClick:Q,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:a}),R.jsx("path",{className:"react-flow__minimap-mask",d:`M${V-N},${O-N}h${Y+N*2}v${X+N*2}h${-Y-N*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}_s.displayName="MiniMap";L.memo(_s);const Dg=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Lg={[Ve.Line]:"right",[Ve.Handle]:"bottom-right"};function Hg({nodeId:e,position:t,variant:n=Ve.Handle,className:r,style:o=void 0,children:i,color:s,minWidth:a=10,minHeight:u=10,maxWidth:c=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:l=!1,resizeDirection:d,autoScale:p=!0,shouldResize:h,onResizeStart:x,onResize:w,onResizeEnd:m}){const E=dr(),g=typeof e=="string"?e:E,v=ie(),M=L.useRef(null),S=n===Ve.Handle,b=J(L.useCallback(Dg(S&&p),[S,p]),re),D=L.useRef(null),z=t??Lg[n];L.useEffect(()=>{if(!(!M.current||!g))return D.current||(D.current=fd({domNode:M.current,nodeId:g,getStoreItems:()=>{const{nodeLookup:k,transform:$,snapGrid:B,snapToGrid:_,nodeOrigin:T,domNode:C}=v.getState();return{nodeLookup:k,transform:$,snapGrid:B,snapToGrid:_,nodeOrigin:T,paneDomNode:C}},onChange:(k,$)=>{const{triggerNodeChanges:B,nodeLookup:_,parentLookup:T,nodeOrigin:C}=v.getState(),P=[],I={x:k.x,y:k.y},A=_.get(g);if(A&&A.expandParent&&A.parentId){const H=A.origin??C,y=k.width??A.measured.width??0,N=k.height??A.measured.height??0,V={id:A.id,parentId:A.parentId,rect:{width:y,height:N,...Ei({x:k.x??A.position.x,y:k.y??A.position.y},{width:y,height:N},A.parentId,_,H)}},O=ur([V],_,T,C);P.push(...O),I.x=k.x?Math.max(H[0]*y,k.x):void 0,I.y=k.y?Math.max(H[1]*N,k.y):void 0}if(I.x!==void 0&&I.y!==void 0){const H={id:g,type:"position",position:{...I}};P.push(H)}if(k.width!==void 0&&k.height!==void 0){const y={id:g,type:"dimensions",resizing:!0,setAttributes:d?d==="horizontal"?"width":"height":!0,dimensions:{width:k.width,height:k.height}};P.push(y)}for(const H of $){const y={...H,type:"position"};P.push(y)}B(P)},onEnd:({width:k,height:$})=>{const B={id:g,type:"dimensions",resizing:!1,dimensions:{width:k,height:$}};v.getState().triggerNodeChanges([B])}})),D.current.update({controlPosition:z,boundaries:{minWidth:a,minHeight:u,maxWidth:c,maxHeight:f},keepAspectRatio:l,resizeDirection:d,onResizeStart:x,onResize:w,onResizeEnd:m,shouldResize:h}),()=>{var k;(k=D.current)==null||k.destroy()}},[z,a,u,c,f,l,x,w,m,h]);const j=z.split("-");return R.jsx("div",{className:se(["react-flow__resize-control","nodrag",...j,n,r]),ref:M,style:{...o,scale:b,...s&&{[S?"backgroundColor":"borderColor"]:s}},children:i})}const Ro=L.memo(Hg);function r0({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:i,color:s,minWidth:a=10,minHeight:u=10,maxWidth:c=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:l=!1,autoScale:d=!0,shouldResize:p,onResizeStart:h,onResize:x,onResizeEnd:w}){return t?R.jsxs(R.Fragment,{children:[id.map(m=>R.jsx(Ro,{className:o,style:i,nodeId:e,position:m,variant:Ve.Line,color:s,minWidth:a,minHeight:u,maxWidth:c,maxHeight:f,onResizeStart:h,keepAspectRatio:l,autoScale:d,shouldResize:p,onResize:x,onResizeEnd:w},m)),od.map(m=>R.jsx(Ro,{className:n,style:r,nodeId:e,position:m,color:s,minWidth:a,minHeight:u,maxWidth:c,maxHeight:f,onResizeStart:h,keepAspectRatio:l,autoScale:d,shouldResize:p,onResize:x,onResizeEnd:w},m))]}):null}const Og=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__renderer")};function Vg({children:e}){const t=J(Og);return t?Wn.createPortal(e,t):null}const Bg=(e,t)=>(e==null?void 0:e.internals.positionAbsolute.x)!==(t==null?void 0:t.internals.positionAbsolute.x)||(e==null?void 0:e.internals.positionAbsolute.y)!==(t==null?void 0:t.internals.positionAbsolute.y)||(e==null?void 0:e.measured.width)!==(t==null?void 0:t.measured.width)||(e==null?void 0:e.measured.height)!==(t==null?void 0:t.measured.height)||(e==null?void 0:e.selected)!==(t==null?void 0:t.selected)||(e==null?void 0:e.internals.z)!==(t==null?void 0:t.internals.z),jg=(e,t)=>{if(e.size!==t.size)return!1;for(const[n,r]of e)if(Bg(r,t.get(n)))return!1;return!0},Fg=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2],selectedNodesCount:e.nodes.filter(t=>t.selected).length});function o0({nodeId:e,children:t,className:n,style:r,isVisible:o,position:i=G.Top,offset:s=10,align:a="center",...u}){var M;const c=dr(),f=L.useCallback(S=>(Array.isArray(e)?e:[e||c||""]).reduce((z,j)=>{const k=S.nodeLookup.get(j);return k&&z.set(k.id,k),z},new Map),[e,c]),l=J(f,jg),{x:d,y:p,zoom:h,selectedNodesCount:x}=J(Fg,re);if(!(typeof o=="boolean"?o:l.size===1&&((M=l.values().next().value)==null?void 0:M.selected)&&x===1)||!l.size)return null;const m=Je(l),E=Array.from(l.values()),g=Math.max(...E.map(S=>S.internals.z+1)),v={position:"absolute",transform:$f(m,{x:d,y:p,zoom:h},i,s,a),zIndex:g,...r};return R.jsx(Vg,{children:R.jsx("div",{style:v,className:se(["react-flow__node-toolbar",n]),...u,"data-id":E.reduce((S,b)=>`${S}${b.id} `,"").trim(),children:t})})}export{t0 as B,n0 as C,Ug as E,Kt as H,o0 as N,G as P,Xg as R,mt as S,ka as a,L as b,Wn as c,Jh as d,ke as e,sg as f,df as g,Jg as h,Gg as i,R as j,e0 as k,Cf as l,Wg as m,Qg as n,r0 as o,J as p,dn as q,Jt as r,zo as s,qg as t,lr as u,Zg as v,Kg as w};
